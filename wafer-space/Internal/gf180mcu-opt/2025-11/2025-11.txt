==============================================================
Guild: wafer.space Community
Channel: gf180mcu-opt
==============================================================

[04/14/2025 14:54] mattvenn
:asic_hats:


[04/14/2025 14:58] 246tnt
What's the `-opt` for ?


[04/14/2025 17:40] mole99
Cost optimization I assume if it is about the metal layer reduction


[04/16/2025 16:25] mithro_
Yes


[04/16/2025 16:26] mithro_
https://docs.google.com/document/d/1Uf6xGZHpuA_G4iyAvxDwEENMjPBAf0Q16D0c8F0lbDQ/edit?tab=t.0#heading=h.vv35m449hl9p


[04/16/2025 18:00] 246tnt
@Tim 'mithro' Ansell Don't have access. Sent request ðŸ™‚


[04/16/2025 18:04] 246tnt
Which metal stackup would we get ?


[04/16/2025 18:18] mithro_
@tnt - TBD - I would like to get us to three metal layers but I know it will be a headache for TinyTapeout


[04/16/2025 18:18] 246tnt
That's just not doable.


[04/16/2025 18:19] 246tnt
The standard cell need 1 metal layer pretty much for their exclusive use. TT need a metal layer for its exclusive use.


[04/16/2025 18:21] 246tnt
So the only way to do routing would basically be a channel router but (1) AFAIK that's not supported by the tooling and (2) this would make the logic density ridiculously low. gf180 was already not the greatest logic density because we only had 5v standard cell but limited to channel routing, it would easily divide it by 2 (and that's optimistic).


[04/19/2025 02:13] mithro_
@tnt - I'd like to eventually get some actual numbers and results - the "default option" is the exact same configuration at GFMPW-0 / GFMPW-1


[04/19/2025 07:56] 246tnt
Thing is it depends what you want to do ... for just pure basic digital designs, sure you can get rid of a lot of the stuff ... but to me that's also makes the process boring and not interesting. I can create full digital designs in a FPGA just fine so meh ðŸ¤· 
The interesting part is analog/mixed-signal design and that's were those weird things like native Vt, deep-nwells, or the efuse stuff because they're the "fun bits" to play with.
That's just my 2ct at least.

{Reactions}
ðŸ’¯ (2)

[04/19/2025 08:15] 246tnt
For TT itself, as stated above, you couldn't just "port" whatever we have now to 3 metal, that just wouldn't work out. You could imagine something TT-like, but you'd basically be starting from scratch since you'd have to using comb power routing and that completely change the way you need to combine stuff and also limits layout option (like, you couldn't do combining of tile area vertically like we do now since that'd be cutting power rails ...).

To realistically port the current "architecture" you'd need 4 metal layers, ( 1 for local interconnect of standard cells, 2 for XY routing, 1 for top level PDN for TT ) with the top one being thick metal ( say 30KA ).

And if you stick with 3 metal, you also have a balance to find for the TopMetal. Because on one hand you ideally want it to be thin, because it's a routing layer, you need to have a relatively fine grid. But on the other, it's your sole layer for PDN so you want its sheet resistance to be low so you don't need rails that are unpractically wide ...
11KA is the thickest option that still has a realistic pitch to use as signal routing and that's 40 mOhms/sq ( ~ 30% higher than in sky130 top metal ).


[04/19/2025 21:08] mithro_
@tnt - Why did you run the PDN over the top of the designs rather than down channels between each tile?


[04/19/2025 21:08] mithro_
@tnt - Trying to get as many projects onto one shuttle as possible?


[04/19/2025 21:13] mithro_
@tnt - Also, does that mean TinyTapeout designs can't use Metal 5?


[04/19/2025 21:13] 246tnt
Several reason :
(1) It'd be wasting space between tiles
(2) Powering only from one side isn't great for IR drop for large tiles. We actually have a minimum of 2 rails going over each tile. More for larger tiles.
(3) We allow to combine multiple tiles, if you have something running between them, you can't do that because it would cut your power rail ... shutting down power to other projects on the same row.
(4) We power gate each project. That's a lot of different "power domains" (think like 500 different power domains on a tiny chip !) so our PDN routing takes quite a bit of space and even though we pretty much fill the entire thick top metal (at least as much as density allows), we still end up with PDN impedance higher than I'd like. So imagine using the space between tiles, we'd need quite the area ...


[04/19/2025 21:14] 246tnt
And yes, on sky130 tiny tapeout designs can't use `Metal5`. And on IHP they can't use `TopMetal2`


[04/19/2025 21:15] mithro_
BTW Have you written this up somewhere?


[04/19/2025 21:16] 246tnt
The only case were people wanted to use it is to make inductors but :
* Inductors are impractically large anyway, given the cost of a tile, for the price you'd need to pay to put your inductor you might as well have paid for a ChipIgnite-mini slot ...
* The IO speed wouldn't allow you any kind of RF frequency interface
So it wasn't all that much of an issue ...


[04/19/2025 21:17] 246tnt
Written what up ?
The whole TT code is public and people can have a look if they choose to. The final GDS of each shuttle is published and people are free to lookup how things are assembled.
There was also some video from Matt about the TT organization and why some of the choices were made.


[04/19/2025 21:20] mithro_
@tnt - Do you mean this video series -> https://www.youtube.com/watch?v=oFz6XTZvfB4 ?

{Embed}
Zero To ASIC Course
https://www.youtube.com/watch?v=oFz6XTZvfB4
TinyTapeout multiplexer progress with Sylvain 'tnt' Munaut - part 3
https://github.com/TinyTapeout/tt-multiplexer
https://tinytapeout.com/

1st interview: https://youtu.be/30emLKLpq50
2nd interview: https://youtu.be/cCbTyfewaCw

00:00 Intro 
01:39 OpenLane 2 
04:07 Custom routing 
11:09 Custom standard cell placement 
12:21 Automatic placement of user projects 
15:30 IO placement 
16:28 Space efficiency 
18:45 T...
gf180mcu-opt_media/maxresdefault-B8E81.jpg

{Reactions}
â¤ï¸

[04/19/2025 21:20] 246tnt
Yes.


[04/19/2025 21:21] 246tnt
Although I'm not sure we get much into PDN anywhere.
People tend to think power distribution is boring stuff ðŸ˜…


[04/19/2025 21:21] 246tnt
Just the stuff blocking the view of their chip art that lies underneath.

{Reactions}
â¤ï¸

[04/19/2025 21:22] mithro_
Yeah ðŸ™‚


[04/19/2025 21:23] 246tnt
I did a bunch of measurement and improvements over the various shuttles ... and TT8 would have been the final iteration with all the improvements done ðŸ˜…  But I guess I'll never see the result of that ...


[04/19/2025 21:26] mithro_
> we still end up with PDN impedance higher than I'd like

What is the effect of the higher PDN impedance?


[04/19/2025 21:28] 246tnt
For digital it can cause voltage drops when power spikes on clock transition, that can screw up your timings.
For analog, well your supply drop more with power usage, so depending on how much current you use, that can get your design out of its correct operating point.


[04/19/2025 21:31] 246tnt
For GF180 you probably have a bit more margin ... simply because dropping 0.1V of 5V isn't quite as bad as loosing 0.1V when your VDD is 1.8V (or 1.2V for IHP).


[04/19/2025 22:01] mithro_
Yeah


==============================================================
Exported 32 message(s)
==============================================================
