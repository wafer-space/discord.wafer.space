AuthorID,Author,Date,Content,Attachments,Reactions
"323371864074485771","mole99","2025-10-02T16:40:54.7030000+00:00","üì¢ Major update to the [gf180mcu-project-template](https://github.com/wafer-space/gf180mcu-project-template)! 

The example design now runs through the complete flow, including:

- Sealring insertion
- Filler generation

... and is DRC and LVS clean, according to the open source PDK.

There is now also a [cocotb](https://www.cocotb.org/) testbench available in the repository. We use the newly released cocotb 2.0.0.
You can run RTL as well as GL simulations, after implementing the design.

To ensure your design will be accepted for tapeout, you will be able to run the [gf180mcu-precheck](https://github.com/wafer-space/gf180mcu-precheck).
At the moment it is still a work in progress.

Further updates will follow, but you can use the current state as a stable basis for implementing your design.
If you encounter any issues, please report them so that we can improve both the template and the PDK.

PS: Special thanks to @Tim Edwards for his help in solving the uncovered PDK and tool-related issues.

Leo","","üëç (2)"
"1365118310701600900","rtimothyedwards_19428","2025-10-02T16:45:37.7310000+00:00","Tim Edwards has only barely begun to address all the issues that have surfaced over the past few weeks. . .","",""
"220639106915368960","tholin","2025-10-02T16:48:14.9130000+00:00","Its that bad?","",""
"323371864074485771","mole99","2025-10-02T16:48:50.2490000+00:00","Haha, I also have to upstream a number of LibreLane related patches üòÑ","",""
"323371864074485771","mole99","2025-10-02T16:51:01.8090000+00:00","Also I forgot to mention that it is now possible to adjust the padring directly from the LibreLane configuration file.","",""
"543162393413287956","h.tamas","2025-10-02T17:09:34.2980000+00:00","Started a thread.","",""
"1365118310701600900","rtimothyedwards_19428","2025-10-02T18:04:34.9260000+00:00","@Tholin :  Well, it means there's a lot to do if we want people to have successful tapeouts.","",""
"220639106915368960","tholin","2025-10-02T18:10:12.9330000+00:00","Bad time for me to be designing analog layouts?","",""
"1365118310701600900","rtimothyedwards_19428","2025-10-02T18:15:42.7890000+00:00","@Tholin :  Great time for you to be designing analog layouts!  That will help flush out a lot of issues.  Make sure that you spot-check designs against the documented rules occasionally and let me know about anything that looks wrong.  Feel free to post a layout to me if you want me to double-check it for issues.","",""
"169786952432746498","mithro_","2025-10-02T18:16:50.8010000+00:00","See what @Tim Edwards said! üôÇ","",""
"220639106915368960","tholin","2025-10-02T18:20:36.1800000+00:00","Alright, sounds good.","",""
"220639106915368960","tholin","2025-10-02T18:20:38.7230000+00:00","I'll keep going.","",""
"1413605821430104114","xintingjiang_36756","2025-10-04T01:11:24.8120000+00:00","I'm curious what is the current problem of this template, is this made the nov gf180 mpw shuttle","",""
"169786952432746498","mithro_","2025-10-04T01:23:57.0660000+00:00","@Xinting Jiang - It should be usable but just keep it up to date as you go.","","üëç (1)"
"323371864074485771","mole99","2025-10-04T07:35:48.1590000+00:00","Exactly. You can already get started with your design, just make sure to keep it up to date with the upstream template.","","üëç (1)"
"378788837452677120","asc9742","2025-10-11T03:01:33.4850000+00:00","@mole99 Hi Leo, I am trying to replace all 56 user pads with analog pads (gf180mcu_fd_io_asig_5p0). Got this error ""No shape in terminal analog[0\].pad/ASIG5V found on layer Metal5"". Any ideas on this issue? Attached a screenshot + the yaml and system verilog files.","project-template_media/image-B347D.png,project-template_media/config_sv_files-19959.zip",""
"323371864074485771","mole99","2025-10-11T08:20:24.0460000+00:00","Hi @asc, there was a port missing for the bondpad BTerm in the `gf180mcu_fd_io__asig_5p0` cell.
If you update your PDK, it should run through now.","","üëç (1)"
"378788837452677120","asc9742","2025-10-11T16:52:17.3220000+00:00","Thank you @mole99 Ran into a new problem with the global routing. I had exchanged all user pads with analog pads, including the clk and rst pad. Could that be causing an issue?","project-template_media/image-6899C.png",""
"323371864074485771","mole99","2025-10-12T05:21:54.1300000+00:00","Yes, that will be a problem. The SDC expects at least one clock. Can you share a repository with your current state? I will take a look tomorrow.","",""
"323371864074485771","mole99","2025-10-13T11:59:05.9030000+00:00","Started a thread.","",""
"323371864074485771","mole99","2025-10-16T13:48:51.5630000+00:00","The [precheck](https://github.com/wafer-space/gf180mcu-precheck) has been updated to finish cleanly with the example project.
The precheck is your gateway to fabrication and will need to be completed via the online platform (coming soon).
You can, of course, run it locally to more easily debug failures.

If you are working on a design, please give it a try and let us know how it goes (SRAMs should still throw errors, that's being worked on next).
Most importantly: please let us know if you can ""cheat"" your way through the precheck üòâ","",""
"220639106915368960","tholin","2025-10-16T14:07:24.1880000+00:00","@mole99 I just updated my project with the changes from the template and since one of the commits reads ""Update LibreLane"", I tried running LL on example_project again to see if the error during GLB is gone. Instead, it now fails even earlier during STA.","",""
"323371864074485771","mole99","2025-10-16T14:35:17.3590000+00:00","Started a thread.","",""
"1338991700084785204","jalf_47390","2025-10-16T20:46:53.3630000+00:00","@mole99 Is there any ESD protection in the IO pins in the template or is it required to be added? If it is in there already, what did you include? Same for all pins differences between them?","",""
"323371864074485771","mole99","2025-10-17T04:56:22.4540000+00:00","Started a thread.","",""
"384390069412429834","polyfractal","2025-10-20T01:08:58.4810000+00:00","how much memory does the `make librelane` step need (roughly)? I fired up an old linux laptop to play around with everything and it crashed after eating 16gb RAM + 4gb swap üôÇ  Curious if I should just increase swap and let it run, or if it really needs like 32 or 64gb?","",""
"384390069412429834","polyfractal","2025-10-20T03:58:22.0310000+00:00","more swap did the trick üôÇ","","waferspace (1),üëç (1)"
"323371864074485771","mole99","2025-10-20T06:32:43.3060000+00:00","It depends on your design üòÅ
Yesterday, I implemented the example template on my laptop, which also has 16 GB of RAM, and it had to use swap as well.

The step that uses the most memory atm is most likely the filler generation.
There you can easily trade off memory consumption by changing the number of tiles (threads) and their size.
I will add some LibreLane configuration variables so that this can be easily tweaked directly from the config.
In the meantime, you can pass the `--jobs` argument to LibreLane to limit the global thread limit across all steps.","","üëç (1)"
"323371864074485771","mole99","2025-10-20T07:40:55.2900000+00:00","Never mind, none of that will be necessary anymore üòÖ

I've just fixed an embarrassing bug in the filler generation script: https://github.com/wafer-space/gf180mcu/commit/57a5725eb4a722cb148ff8cf84c5f22ce0be8d64
Now, filler generation uses only a fraction of the memory and completes much faster.
Always double check how functions are supposed to be used (the naming actually said it all üòÑ).","",""
"323371864074485771","mole99","2025-10-20T07:42:57.7650000+00:00","üì¢ Please update your project templates and pull the latest changes from the PDK!","",""
"384390069412429834","polyfractal","2025-10-20T13:51:32.8920000+00:00","awesome, thanks @mole99!","","üëå (1)"
"492702620759228416","mattvenn","2025-10-20T22:17:17.8050000+00:00","when will the submission system be open?","","üíú (1)"
"323371864074485771","mole99","2025-10-21T06:22:41.6860000+00:00","That's for @Tim 'mithro' Ansell to say.","",""
"169786952432746498","mithro_","2025-10-21T08:53:49.1730000+00:00","@Matt Venn - Hopefully in the next week.","",""
"220639106915368960","tholin","2025-10-26T19:54:47.9740000+00:00","That's quite a lot of VDD and VSS pads on the template. Like 10 each. That seems a bit excessive. What is the max current per pad?","",""
"169786952432746498","mithro_","2025-10-27T02:50:36.7770000+00:00","","",""
"169786952432746498","mithro_","2025-10-27T02:51:12.1350000+00:00","@Tholin - That was from @tnt in the #cob channel.","",""
"220639106915368960","tholin","2025-10-27T08:12:04.7600000+00:00","Ah, I see. Thank you.","",""
"220639106915368960","tholin","2025-11-01T19:17:19.2950000+00:00","Getting some *extreme* hold violations when integrating a macro into chip_top that is not present when hardening the macro itself. Checking the logs, the worst slack is simply from the reset pad.","project-template_media/image-91CC9.png",""
"323874444344950794","markemer","2025-11-01T19:21:10.7870000+00:00","Is that in ns? If so, oof. And could it be a bad capacitance extraction on the pads themselves?","",""
"596068704471482370","246tnt","2025-11-01T19:28:49.0980000+00:00","That's probably because the macro has its own clock tree. So the clock that its internal FF sees is delayed by many ns compared to the clock on its input pin.","",""
"596068704471482370","246tnt","2025-11-01T19:29:29.2210000+00:00","If the CTS inside your top level project isn't setup to feed the macro an ""early clock"" (i.e. from the root of its clock tree instead of a leaf), that could explain why you see so many hold violations.","",""
"596068704471482370","246tnt","2025-11-01T19:30:27.2500000+00:00","(Just a theory of course ... can't do more than theorize without more data)","",""
"220639106915368960","tholin","2025-11-01T19:45:54.9430000+00:00","","project-template_media/image-226EA.png",""
"220639106915368960","tholin","2025-11-01T19:45:57.8170000+00:00","I don't have a repo for this yet","",""
"220639106915368960","tholin","2025-11-01T19:46:37.3770000+00:00","There is no CTS in the top level","",""
"220639106915368960","tholin","2025-11-01T19:46:50.7330000+00:00","Actually, there is no standard cells in the top level","",""
"220639106915368960","tholin","2025-11-01T19:46:58.4970000+00:00","Just macros","",""
"220639106915368960","tholin","2025-11-01T20:56:56.7900000+00:00","I guess this calls for a custom SDC file. I started by copying the SDC file provided by efabless for user project macros and will progressively modify it.","",""
"220639106915368960","tholin","2025-11-01T22:33:29.6630000+00:00","Literally nothing I do is changing the hold violations. Its refusing to budge.","",""
"220639106915368960","tholin","2025-11-02T16:16:59.0550000+00:00","Almost got it. Commit soon. Just trying to clean up my SDC file.","",""
"220639106915368960","tholin","2025-11-02T16:17:33.3310000+00:00","What‚Äôs the point of `set_driving_cell`? Does it automatically determine slew rates and delays, or do I still need to specify those manually?","",""
"220639106915368960","tholin","2025-11-02T16:42:54.8520000+00:00","Doesn‚Äôt matter. I cannot `set_driving_cell -lib_cell gf180mcu_fd_io__bi_24t` inside my macro SDC files anyways:","project-template_media/image-55734.png",""
"323371864074485771","mole99","2025-11-02T18:10:19.0380000+00:00","Do you use the LibreLane version from the template or [this branch](https://github.com/librelane/librelane/pull/806)?
Otherwise the pad cells are not read in.","",""
"220639106915368960","tholin","2025-11-02T18:16:37.9600000+00:00","I cannot use the LibreLane version from the template for my macros. Python error.","project-template_media/image-BC7E4.png",""
"220639106915368960","tholin","2025-11-02T18:17:00.5980000+00:00","I mean, the PDK Version","",""
"220639106915368960","tholin","2025-11-02T18:18:03.4310000+00:00","The error during GPL I reported before persists, so I cannot use the LibreLane version.","",""
"220639106915368960","tholin","2025-11-02T18:21:10.1310000+00:00","But I also don‚Äôt understand what `set_driving_cell` even does. Right now my approach has been to determine values to set on `set_input_delay` , `set_clock_latency`, `set_input_transition` and `set_clock_transition` by manually interpreting the values in the liberty files for the IO pads.","",""
"220639106915368960","tholin","2025-11-02T18:21:49.4350000+00:00","Except when it comes to the internal bus inside the chip, where I have to rely on STA for numbers.","",""
"220639106915368960","tholin","2025-11-02T18:23:29.5800000+00:00","Actually, it seems fine now, at least on this one macro, but there is still a big difference in behavior.","",""
"220639106915368960","tholin","2025-11-02T18:24:29.9480000+00:00","I just got to `Stage 37 - Resizer Timing Optimizations (Post-Clock Tree Synthesis)` on this CPU macro and on Iteration 0 its starting with a TNS of **-5042** compared to main librelane, where I got -250.","",""
"220639106915368960","tholin","2025-11-02T18:24:34.0150000+00:00","I changed nothing about the config.","",""
"220639106915368960","tholin","2025-11-02T18:24:41.0840000+00:00","Just switched LL versions.","",""
"220639106915368960","tholin","2025-11-02T19:22:54.5390000+00:00","Yeah, I‚Äôm getting severe performance degradation in the wafer.space template LL version in two ways. The timings of the design are worse, and also the flows take forever to run. After one hour, it is still stuck in Timing Optimizations. This whole flow used to take < 15 minutes. @mole99","",""
"220639106915368960","tholin","2025-11-03T00:24:06.3320000+00:00","@mole99 This page linked in the README of the template no longer exists.","project-template_media/image-C502E.png",""
"220639106915368960","tholin","2025-11-03T00:24:21.6870000+00:00","","project-template_media/image-6E9A7.png",""
"323371864074485771","mole99","2025-11-03T07:16:38.1700000+00:00","The wafer.space gf180mcu PDK requires the LibreLane version in the template (or from the branch).","",""
"323371864074485771","mole99","2025-11-03T07:17:31.9560000+00:00","The issue is still open at OpenROAD's side: https://github.com/The-OpenROAD-Project/OpenROAD/issues/8229
However, as mentioned before, you can simply disable timing driven placement.","",""
"323371864074485771","mole99","2025-11-03T07:18:21.9850000+00:00","`set_driving_cell` automates exactly that. It takes the values directly from the LIB.","",""
"323371864074485771","mole99","2025-11-03T07:19:37.4490000+00:00","Thanks for reminding me. The LibreLane docs have recently been updated.","",""
"220639106915368960","tholin","2025-11-03T08:12:50.6020000+00:00","Thank you. I could find 0 information about this command online.","",""
"596068704471482370","246tnt","2025-11-03T08:23:12.6560000+00:00","https://github.com/The-OpenROAD-Project/OpenSTA/blob/master/doc/OpenSTA.pdf","",""
"323371864074485771","mole99","2025-11-03T20:35:00.4780000+00:00","This is the ‚ú® magic ‚ú® line for the `gf180mcu_fd_ip_sram__sram512x8m8wm1` SRAM:

```
add_pdn_stripe -grid macro -layer Metal4 -width 2.36 -offset 1.18 -spacing 0.28 -pitch 426.86 -starts_with GROUND -number_of_straps 2
```

It adds a power/ground pair on each side of the SRAM macro, directly above the pins. Since this uses the local coordinate system of the macro, you can move the macro around as you wish, the PDN straps will follow. As the PDN straps go all the way across the macro, connecting them to the PDN above is very easy.","","‚ú® (1),üíØ (1)"
"323371864074485771","mole99","2025-11-03T20:35:19.5410000+00:00","(top left)","project-template_media/Bildschirmfoto_vom_2025-11-03_21-13-08-89A4F.png",""
"323371864074485771","mole99","2025-11-03T20:35:30.9510000+00:00","(top right)","project-template_media/Bildschirmfoto_vom_2025-11-03_21-13-33-4F47A.png",""
"323371864074485771","mole99","2025-11-03T20:35:41.7230000+00:00","If you rotate the SRAM by 90 or 270 degrees, you need to use this line:

```
add_pdn_stripe -grid sram_macros_WE -layer Metal4 -width 2.36 -offset 1.18 -spacing 0.28 -pitch 479.88 -starts_with GROUND -number_of_straps 2
```

Unfortunately, the connection to VSS is not as good on the right side. It is better to use the first orientation.

Don't forget the PDN connect:

```
add_pdn_connect \
    -grid macro \
    -layers ""$::env(PDN_VERTICAL_LAYER) Metal3""
```","",""
"323371864074485771","mole99","2025-11-03T20:35:48.6920000+00:00","","project-template_media/Bildschirmfoto_vom_2025-11-03_21-30-41-0737D.png",""
"323371864074485771","mole99","2025-11-03T20:35:58.0500000+00:00","Now I just need to make magic DRC happy, and then I can push the the example usage of the SRAM to the template repo.","",""
"220639106915368960","tholin","2025-11-03T20:36:05.7920000+00:00","Awesome","",""
"220639106915368960","tholin","2025-11-03T20:36:34.4290000+00:00","I re-used my setup from GFMPW with a wrapper macro for the SRAM that just added the Metal4 strips.","",""
"220639106915368960","tholin","2025-11-03T20:36:54.7980000+00:00","Which is not optimal","",""
"323371864074485771","mole99","2025-11-03T20:37:45.9190000+00:00","Well, if I remember correctly, Efabless used your solution too :)","",""
"220639106915368960","tholin","2025-11-03T20:37:58.0510000+00:00","Yeah. That‚Äôs where I got it from.","","üëç (1)"
"323371864074485771","mole99","2025-11-03T20:45:51.7880000+00:00","Started a thread.","",""
"274535015969456128","greg.hashtag.9468","2025-11-05T05:53:26.9610000+00:00","I've setup a new system following the readme. And then just run the stock template as a sanity check, it does complete. But I'm seeing KLayout DRC errors. (along with timing/cap/slew warnings at some corners)
```
...
    ""DM4.8"": 0,
    ""DF.12"": 3,
    ""NW.2b_MV"": 16,
    ""DPF.4"": 38,
    ""DCF.4"": 48,
    ""total"": 105
}
```
Is this expected? Or does it indicate something I should debug with my environment first?","",""
"323371864074485771","mole99","2025-11-05T07:38:06.3810000+00:00","Started a thread.","",""
"323371864074485771","mole99","2025-11-06T10:32:49.2960000+00:00","üì¢ It's update time!

The project template has been updated with support for the foundry SRAMs!
Two SRAMs of type `sram512x8m8wm1` are instantiated in `chip_core` and placed inside the chip in two different orientations (north and east).
If you add more SRAMs, make sure to update the LibreLane config (`librelane/config.yaml`) and the PDN configuration (`librelane/pdn_cfg.tcl`).

In addition, an issue has been fixed with filler generation, the way how the KLayout DRC deck was invoked (connectivity rules), and an error in the seal ring generator. With these changes the template is now DRC clean for both the magic and KLayout DRC deck.
Furthermore, the design is LVS clean and the there are no setup and hold violations for this example.

Please update your projects to the latest template, and don't forget to update the PDK as well (`make clone-pdk`).
Let me know if you have any questions.","","waferspace (5),üëç (2),üéâ (1)"
"220639106915368960","tholin","2025-11-06T22:46:24.2640000+00:00","Updated my AS2650v2 wafer.space port to use the new method for instantiating SRAMs.","","üíú (1)"
"220639106915368960","tholin","2025-11-06T22:46:30.3660000+00:00","Works!","",""
"323371864074485771","mole99","2025-11-07T05:46:39.4190000+00:00","Great to hear üëèüèª","",""
"169786952432746498","mithro_","2025-11-07T12:03:41.6530000+00:00","Pinned a message.","",""
"169786952432746498","mithro_","2025-11-07T12:04:09.3990000+00:00","@mole99 - Has performance / RAM usage changed much in the latest updates?","",""
"323371864074485771","mole99","2025-11-07T12:26:01.5640000+00:00","RAM usage has gone down drastically during the filler generation step after I fixed a bug there. However, that was already before this update.","",""
"596068704471482370","246tnt","2025-11-17T10:35:40.9980000+00:00","How long does the template build (default) take for people ?","",""
"596068704471482370","246tnt","2025-11-17T10:35:54.8040000+00:00","Just wondering if my vm is slow or something ...","",""
"323371864074485771","mole99","2025-11-17T10:39:06.4170000+00:00","The CI takes around 50mins without DRC: https://github.com/wafer-space/gf180mcu-project-template/actions/runs/19297076321/job/55181634117
Locally, it's faster for me. The DRC can then take an additional 1‚Äì1.5 hours.","","üëç (1)"
"596068704471482370","246tnt","2025-11-17T13:35:45.0040000+00:00","Here full run took 3h30 üòÖ 
Looking at timestamps, klayout drc was 2h 48 min of that.","",""
"220639106915368960","tholin","2025-11-17T13:36:45.6560000+00:00","What? My top-level DRC runs don't take nearly as long.","",""
"220639106915368960","tholin","2025-11-17T13:37:32.0650000+00:00","I'm also still struggling with analog pads not getting wired up.","",""
"323371864074485771","mole99","2025-11-17T14:18:46.6320000+00:00","Just had a full run (inlcuding DRC) in 48:05 using the template üòÅ","",""
"596068704471482370","246tnt","2025-11-17T14:21:15.2210000+00:00","Huh ... that's worrying ...","",""
"220639106915368960","tholin","2025-11-17T17:57:17.3190000+00:00","Something changed. KLayout DRC is so much slower now.","",""
"323371864074485771","mole99","2025-11-17T18:52:44.9820000+00:00","There haven't been changes to the PDK for two weeks: https://github.com/wafer-space/gf180mcu
Although a number of changes are coming up.","",""
"220639106915368960","tholin","2025-11-17T21:17:26.0910000+00:00","And why are my analog signals not getting routed?","project-template_media/image-C20A2.png","üòÆ (1)"
"220639106915368960","tholin","2025-11-17T21:31:46.2870000+00:00","I CTRL+F‚Äôd for ""analog"" in the global routing logs and found nothing. Its skipping it.","",""
"596068704471482370","246tnt","2025-11-17T21:33:46.8780000+00:00","Are they defined any differently in your netlist ?","",""
"220639106915368960","tholin","2025-11-17T21:35:21.6610000+00:00","No","",""
"538398807986274304","rzioma","2025-11-18T11:26:35.7690000+00:00","Z80 design is finally green on github \o/
@mole99 is there a way to download artifacts / GDS from github job for local inspection? *I feel quite dumb for asking, but I couldn't figure how to do it so far*","project-template_media/image-95F6F.png","üéâ (1)"
"538398807986274304","rzioma","2025-11-18T11:30:06.2530000+00:00","Ah, when building locally on Mac it is necessary to increase file-descriptor count otherwise Magic streamout fails `ulimit -n 1024`","",""
"538398807986274304","rzioma","2025-11-18T11:32:04.7010000+00:00","@mole99 I tried to add `ulimit` to flake.nix as shell hook, but failing so far even with ChatGPT *""help""* üòì","",""
"323371864074485771","mole99","2025-11-18T11:43:30.1240000+00:00","Hi ReJ! Congrats üëè
Just so you know, the CI only runs the implementation, as the DRC requires too much memory. So you need to make sure to run DRC locally.

Yes, there are ways to upload artifacts: https://docs.github.com/en/actions/tutorials/store-and-share-data
I haven't added this to the CI yet since I though it would quicky fill up the available storage space. But perhaps with a compression of the artifacts and a short retention time, it could be fine?","","‚ù§Ô∏è (1)"
"538398807986274304","rzioma","2025-11-18T11:45:50.2380000+00:00","For some reason I get hold violations when I build locally (MacOS could be a problem here üòâ ), but it is fine building on github. Investigating atm.","",""
"323371864074485771","mole99","2025-11-18T11:59:07.3670000+00:00","The Nix flake in the template uses LibreLane's create-shell: https://github.com/librelane/librelane/blob/dev/nix/create-shell.nix
It seems that mkShell has a `shellHook` that could be used for that. However, I'm not sure how to override this from the template.","","üëç (1)"
"323371864074485771","mole99","2025-11-18T12:02:40.4050000+00:00","Strange. There may be slight differences between the Linux and mac version of OpenROAD. If your hold violations are only just over the limit, perhaps that could make the difference.
Make sure your clock tree is good, and you could increase the `PL_RESIZER_HOLD_SLACK_MARGIN`.","",""
"220639106915368960","tholin","2025-11-18T12:21:33.0050000+00:00","All of my configs contain
```
GRT_RESIZER_HOLD_SLACK_MARGIN: 0.1
PL_RESIZER_HOLD_SLACK_MARGIN: 0.1
PL_RESIZER_HOLD_MAX_BUFFER_PCT: 100
```
by default now since I had hold violations screw me over before.","","üëç (1)"
"738396032295108721","bailey8889","2025-11-18T12:45:40.1220000+00:00","@ReJ aka Renaldas Zioma If you're just running a batch job with no editing, you probably don't need file locking. Disabling this with the magic command `locking disable` may allow you to load large designs without changing the ulimit. http://opencircuitdesign.com/magic/commandref/locking.html","","üëç (1)"
"803213471402688522","_luke_w_","2025-11-18T15:43:17.6470000+00:00","Is it expected to get some antenna violations from building the project template?
```
* Antenna
Failed êÑÇ
Pin violations: 17
Net violations: 11
Check the report directory of OpenROAD.CheckAntennas.
```

checking the CI run here I do see the same violations: https://github.com/wafer-space/gf180mcu-project-template/actions/runs/19297076321/job/55181634117","",""
"596068704471482370","246tnt","2025-11-18T15:47:07.7430000+00:00","Yes","",""
"803213471402688522","_luke_w_","2025-11-18T15:47:38.2630000+00:00","Ok, thanks üôÇ are they concerning or just something to waive?","",""
"323371864074485771","mole99","2025-11-18T16:08:21.3440000+00:00","That is something that requires a closer look into OpenROAD and LibreLane in order to find a proper solution. For large ratios you can manually insert ECO diodes.

So far, most (all?) Tiny Tapeout designs seem to work just fine, and almost all of them have some antenna violations.","","‚ù§Ô∏è (1)"
"323371864074485771","mole99","2025-11-18T16:09:22.2250000+00:00","Search for `INSERT_ECO_DIODES` in https://librelane.readthedocs.io/en/latest/reference/step_config_vars.html","",""
"803213471402688522","_luke_w_","2025-11-18T17:25:23.7510000+00:00","Thanks, I guess I'll worry about that later then üòÖ","","üòÅ (1)"
"803213471402688522","_luke_w_","2025-11-18T17:25:55.7690000+00:00","In `chip_core.sv` in the example project, why does it have `keep` attributes on the SRAM? Are they just left in from initial hacking or are they required?

```
    logic [7:0] sram_0_out;

    (* keep *)
    gf180mcu_fd_ip_sram__sram512x8m8wm1 sram_0 (
        `ifdef USE_POWER_PINS
        .VDD  (VDD),
        .VSS  (VSS),
        `endif

        .CLK  (clk),
        .CEN  (1'b1),
        .GWEN (1'b0),
        .WEN  (8'b0),
        .A    ('0),
        .D    ('0),
        .Q    (sram_0_out)
    );
```","",""
"803213471402688522","_luke_w_","2025-11-18T17:26:56.7920000+00:00","I will happily cargo cult it into my own memory wrappers, I was just curious","",""
"323371864074485771","mole99","2025-11-18T17:28:36.3930000+00:00","The former. You should be able to remove the `(* keep *)` and since Yosys sees that the outputs of the macro are being used, it will keep it. I'll remove it the next time I push another change to the template :)","",""
"803213471402688522","_luke_w_","2025-11-18T17:29:01.1470000+00:00","ok nice thanks, I thought that would be the case but wasn't sure if there were hidden gotchas","","üëç (1)"
"803213471402688522","_luke_w_","2025-11-18T17:30:15.9540000+00:00","flow related question (if the answer is ""RTFM"" I can attempt to do that): in our ASIC flow at work, if I hand-instantiate a cell then the buffer width can be changed during layout but otherwise it'll remain the same cell with the same hierarchical path. Is that the case here or do I need to add `(* dont_touch keep *)` etc to my cell wrappers?","",""
"323371864074485771","mole99","2025-11-18T17:34:17.1230000+00:00","Cell attributes are currently not retained. You can set `SYNTH_WRITE_NOATTR` to false and they should be passed on to OpenROAD.
However, there's `RSZ_DONT_TOUCH_RX` and `RSZ_DONT_TOUCH_LIST` if you want to keep a cell or net untouched.
I think if you just set the `(* keep *)` attribute on a stdcell, Yosys will instantiate the stdcell and OpenROAD is free to change it's buffer width.","","üëç (1)"
"803213471402688522","_luke_w_","2025-11-18T17:34:51.4930000+00:00","nice, thanks","",""
"803213471402688522","_luke_w_","2025-11-18T17:35:33.0960000+00:00","so it sounds like just putting `(* keep *)` on my cells is what I want; quite happy for the tools to change the drive as I don't fancy going and fixing all the transition violations myself üôÇ","","üëå (1)"
"543162393413287956","h.tamas","2025-11-18T17:44:35.0370000+00:00","FYI time driven placement (enabled by default) ignores the `RSZ_DONT_TOUCH_*` setting and resizes the cells nonetheless. You can work around it by setting `PL_TIME_DRIVEN` to 0.","",""
"323371864074485771","mole99","2025-11-18T17:47:17.3720000+00:00","Yes, that is actually a ""bug"" in LibreLane as `dont_touch` does not prevent placement. So we could actually keep the attribute throughout GPL. See here: https://github.com/librelane/librelane/issues/695","","üëç (1)"
"803213471402688522","_luke_w_","2025-11-18T20:32:43.7750000+00:00","Some incredibly minor DRCs (SRAM VDD/VSS *completely unconnected* while I figure out how the hierarchical paths are escaped) but in theory here is a processor, JTAG and 4 kB of RAM. Thanks for making the template, it made it super fast to get started üòÑ","project-template_media/image-DCA97.png","‚ù§Ô∏è (2),üéâ (2)"
"803213471402688522","_luke_w_","2025-11-18T20:35:09.0490000+00:00","Also I may have mixed up the SRAM dimensions and there is only a 15 um routing channel between the two rows ü§î","",""
"803213471402688522","_luke_w_","2025-11-18T22:57:18.3040000+00:00","I'm guessing it's expected that the `librelane-magicdrc` makefile target crashes out during klayout/magic XOR, since klayout was skipped?","",""
"803213471402688522","_luke_w_","2025-11-18T22:59:02.0150000+00:00","i.e.

```
Reading /home/luke/proj/riscboy-180/librelane/runs/RUN_2025-11-18_22-06-42/56-magic-streamout/chip_top.magic.gds ..
ERROR: In /nix/store/g3fml7j9yabcq2cmqm5yh19fxrm1h919-python3-3.12.10-env/lib/python3.12/site-packages/librelane/scripts/klayout/xor.drc: 'source': Stream has unknown format: /home/luke/proj/riscboy-180/librelane/runs/RUN_2025-11-18_22-06-42/56-magic-streamout/chip_top.magic.gds in Layout::read
Total elapsed: 0.010s  Memory: 413.00M
ERROR: RuntimeError: 'source': Stream has unknown format: /home/luke/proj/riscboy-180/librelane/runs/RUN_2025-11-18_22-06-42/56-magic-streamout/chip_top.magic.gds in Layout::read in Executable::execute
  /nix/store/g3fml7j9yabcq2cmqm5yh19fxrm1h919-python3-3.12.10-env/lib/python3.12/site-packages/librelane/scripts/klayout/xor.drc:78:in `execute'
  :/built-in-macros/drc_interpreters.lym:31:in `instance_eval'
  :/built-in-macros/drc_interpreters.lym:31:in `execute'
/home/luke/proj/riscboy-180/librelane/runs/RUN_2025-11-18_22-06-42/56-magic-streamout/chip_top.magic.gds
/home/luke/proj/riscboy-180/librelane/runs/RUN_2025-11-18_22-06-42/57-klayout-streamout/chip_top.klayout.gds
```

if it's a known issue with that target then I won't bother debugging üôÇ","",""
"803213471402688522","_luke_w_","2025-11-18T23:05:24.3230000+00:00","Does this YAML config go anywhere other than `chip_top.sdc`?

```
# Clock
CLOCK_PORT: clk_PAD
CLOCK_NET: clk_pad/Y

CLOCK_PERIOD: 40 # 25 MHz
```

I saw the warning about multiple clocks in there but hoping I can just ignore that and write a normal `.sdc` file.","",""
"323371864074485771","mole99","2025-11-19T07:20:41.5210000+00:00","Started a thread.","",""
"323371864074485771","mole99","2025-11-19T07:22:52.3250000+00:00","From what I know, this is only passed on to the SDC file.
Yes, you should be able to fully customize your SDC.","","üëç (1)"
"538398807986274304","rzioma","2025-11-19T07:50:20.2110000+00:00","DRC is passing (minus some antenna violations).
Tiny Z80 looks so lonely in there.","project-template_media/Pasted_Graphic_12-0D70E.png","blobclap (3)"
"538398807986274304","rzioma","2025-11-19T07:55:35.9470000+00:00","@mole99  However I ran into some problems with `gf180mcu-precheck` repository. It:
- crashes on my Ubuntu machine (*perhaps running out of memory, investigating*) during the Density check
- fails to find qrcode library on OSX machine (*Error: Couldn't load the qrcode library.  *)","",""
"323371864074485771","mole99","2025-11-19T07:58:33.3400000+00:00","Congrats! üëè
You did enable the environment within the precheck, right?
Because I specifically request the `qrcode` Python module üòÖ
https://github.com/wafer-space/gf180mcu-precheck/blob/1b639dff3d87a50e0759541701c7d162e1765630/flake.nix#L47","",""
"538398807986274304","rzioma","2025-11-19T08:03:18.2850000+00:00","ah, this might be the problem `pkgs.stdenv.isLinux`","","üòÜ (1)"
"323371864074485771","mole99","2025-11-19T08:04:58.2480000+00:00","You're absolutely right! It's a leftover from a different flake, I completely overlooked it.","",""
"323371864074485771","mole99","2025-11-19T08:05:14.7520000+00:00","Pushing a fix shortly...","","‚ù§Ô∏è (1)"
"323371864074485771","mole99","2025-11-19T08:09:15.9240000+00:00","@ReJ aka Renaldas Zioma You can give it another try now.","","üëç (1)"
"538398807986274304","rzioma","2025-11-19T11:00:22.0450000+00:00","Worked like a charm. Precheck passed!","","ü•≥ (2)"
"384390069412429834","polyfractal","2025-11-19T14:55:25.7120000+00:00","is there an additional log to get more information about librelane build failures? Trying a test build of what I have to see the end-to-end workflow, and it's failing to wire up power pins to my sram macos (deep in the bowels of my project)

```
Connecting power net VDD to i_chip_core.u_core.tta_0.lsu_fu_0.sram_512x32_0.gf180mcu_fd_ip_sram__sram512x8m8wm1_0/VDD‚Ä¶
[INFO] Made 0 connections.
[06:50:13] ERROR    The following error was encountered while running the flow:  __main__.py:189 
    Odb.SetPowerConnections failed with the following errors:
         add_global_connections failed to make any connections for 'i_chip_core.u_core.tta_0.lsu_fu_0.sram_512x32_0.gf180mcu_fd_ip_sram__sram512x8m8wm1_0/VDD' to VDD. 
```

I've gone through and added the conditional stuff where needed
```
`ifdef USE_POWER_PINS
.VDD  (VDD),
.VSS  (VSS),
`endif
```","",""
"384390069412429834","polyfractal","2025-11-19T14:59:16.8390000+00:00","ah... yosys is deleting my sram module (and a bunch of other stuff)

`Deleting now unused module tta::sram::sram_512x32.  `","","üëç (1)"
"384390069412429834","polyfractal","2025-11-19T15:00:27.4400000+00:00","ok new question.... why? üòÇ  I know there's a ""keep"" annotation to force it, but I don't think any of this is dead code? but I have no idea how synthesizing works","",""
"323371864074485771","mole99","2025-11-19T15:00:33.5980000+00:00","You can find all log files and artifacts in the `librelane/runs/*` directory.
Making the power connections in the RTL is one way, the other is to use `PDN_MACRO_CONNECTIONS`.","","üëÄ (1)"
"384390069412429834","polyfractal","2025-11-19T15:01:18.4580000+00:00","aha! `PDN_MACRO_CONNECTIONS` looks much more convenient","",""
"323371864074485771","mole99","2025-11-19T15:01:59.7410000+00:00","Yes, if Yosys removes the SRAM instances, it's because it recognises that none of the outputs are being used. Optoimizing it away üòÅ","",""
"323371864074485771","mole99","2025-11-19T15:02:17.5420000+00:00","So there is probably an issue in your RTL.","",""
"384390069412429834","polyfractal","2025-11-19T15:06:10.4330000+00:00","hm, it seems to be deleting basically my entire project üòÑ","project-template_media/image-5CCBB.png",""
"384390069412429834","polyfractal","2025-11-19T15:09:38.7690000+00:00","if a module doesn't have an output, does it get optimized away? I've only wired up inputs to my processor so far (clock, reset, uart loading, etc). so it can run programs but no output","",""
"220639106915368960","tholin","2025-11-19T15:13:18.9320000+00:00","Yes. Yosys checks input to output paths to see what it can optimize away, in my experience.","","üëç (1)"
"220639106915368960","tholin","2025-11-19T15:13:36.1500000+00:00","If it sees 0 outputs, it just goes ""this whole design is just void""","",""
"384390069412429834","polyfractal","2025-11-19T15:13:57.7200000+00:00","argh","",""
"384390069412429834","polyfractal","2025-11-19T15:14:01.1820000+00:00","gotcha, thanks!","",""
"384390069412429834","polyfractal","2025-11-19T15:55:19.1430000+00:00","wired in a temporary output, got the ball moving again! Just to confirm, it looks like the sram macros have to be placed manually on the die? (I see the placement stuff in pdn_cfg.tcl for the two macros in the demo chip_top)","",""
"384390069412429834","polyfractal","2025-11-19T15:55:59.0550000+00:00","and in the config toml","",""
"323371864074485771","mole99","2025-11-19T15:58:19.7440000+00:00","Yes exactly. Placement is defined in `config.yaml` and connection to PDN in `pdn_cfg.tcl`.","",""
"384390069412429834","polyfractal","2025-11-19T16:00:11.9220000+00:00","great, thank you! out of curiosity, is there a reason placements are done by hand instead of being auto-placed by librelane? because they are so large you want a human to do it?","",""
"384390069412429834","polyfractal","2025-11-19T16:02:57.6160000+00:00","(entirely new to this whole world, so lacking a lot of background context üôÇ )","",""
"323371864074485771","mole99","2025-11-19T16:18:59.3100000+00:00","No problem! In our case, manual placement is mostly fine, since there are only a handful of SRAM macros to place.
There was some effort to integrate OpenROAD's automatic macro placer into LibreLane, but it wasn't completed: https://github.com/librelane/librelane/issues/537","",""
"384390069412429834","polyfractal","2025-11-19T16:36:42.2400000+00:00","Makes sense. Juice probably isn't worth the squeeze given the nature of projects here. Easier to do it by hand üôÇ","",""
"803213471402688522","_luke_w_","2025-11-19T16:37:02.6070000+00:00","Not my domain (I do frontend) but I can take a couple of guesses at the reasons:

1. Difficult to move large macros later in pnr due to the number of ripups, so there's a high likelihood of automatic placement backing itself into a corner and making the design unroutable.

2.  Desire for consistency between implementation runs -- implementation is usually iterative with new RTL updates  regularly coming in, and you want to know whether issues are due to RTL changes etc as opposed to just the tools having a bad day

3. The power connections to macros like SRAMs etc are usually hand-tuned for best results, and you don't want to rip this up every time","","üëè (1),üëç (1)"
"803213471402688522","_luke_w_","2025-11-19T16:37:46.0820000+00:00","At least that's for the commercial projects I've worked on. Different dynamics for the new open-source stuff","",""
"384390069412429834","polyfractal","2025-11-19T16:38:08.3490000+00:00","Ahh interesting!","",""
"596068704471482370","246tnt","2025-11-19T16:39:10.2500000+00:00","I'd love to have suggestions though. Like it would just do a rough electrostatic-style placement  of all standard cells and macro to sort of see how things arrange themselves and make sure I'm not placing those macro at a very inconvenient spot.","","‚ù§Ô∏è (1),üíØ (1)"
"596068704471482370","246tnt","2025-11-19T16:39:26.2760000+00:00","And then I can lock it there and never move it while refining RTL.","",""
"803213471402688522","_luke_w_","2025-11-19T16:39:39.9240000+00:00","Yeah, like BRAM locking on FPGA üòÖ","",""
"803213471402688522","_luke_w_","2025-11-19T16:42:04.7000000+00:00","It's a really interesting question, I never thought about it. I just sort of accepted the layout folks at work spent days gently massaging the RAMs into place","",""
"384390069412429834","polyfractal","2025-11-19T17:44:04.4500000+00:00","still not 100% confident yosys didnt optimize away half the design and my laptop locked up so I'm not sure if it actually completed successfully before I had to go to work...but it did finish enough to generate an output GDS ü•≥ 

so much unused space üòÇ","project-template_media/Screenshot_From_2025-11-19_08-31-14-25A7F.png,project-template_media/Screenshot_From_2025-11-19_08-30-31-7065F.png","üëç (1),üëè (1)"
"840182560252624916","logic_anarchy","2025-11-19T17:56:18.3340000+00:00","My custom ASIC KianV SV32 SoC is now finalized!
RV32IMA + Zicntr/Zicsr/Zifencei/SSTC with full MMU ‚Äî running uLinux, Linux, and xv6.
With huge help from @mole99  ‚Äî and thanks to 
@Tim 'mithro' Ansell","project-template_media/G6IpKybXoAE1ATj-B5552.png,project-template_media/G6IqYgdXkAAk0MJ-1801C.png","ü•≥ (2),‚ù§Ô∏è (1)"
"384390069412429834","polyfractal","2025-11-19T18:08:09.1670000+00:00","Started a thread.","",""
"840182560252624916","logic_anarchy","2025-11-19T18:08:19.3200000+00:00","It will run mailine linux/uLinux/XV6 Unix or newer","project-template_media/Screenshot_from_2025-11-19_19-01-14-47AD1.png,project-template_media/Screenshot_from_2025-11-19_19-07-16-CE074.png",""
"840182560252624916","logic_anarchy","2025-11-19T18:30:35.6820000+00:00","I‚Äôve shared a Python script to render the chip layout from GDS. It‚Äôs pretty slow and memory-hungry, but it works. I‚Äôll put it on my GitHub repo later.","project-template_media/ieee_export_chip-E6A12.py","‚ù§Ô∏è (1)"
"384390069412429834","polyfractal","2025-11-19T18:33:51.2520000+00:00","definitely will try that when I get home!","",""
"220639106915368960","tholin","2025-11-19T18:49:58.5110000+00:00","This script generates 3D models and is multithreaded
https://github.com/AvalonSemiconductors/gfmpw1-multi/blob/main/gds2gltf.py","","‚ù§Ô∏è (1)"
"840182560252624916","logic_anarchy","2025-11-19T18:54:14.7500000+00:00","Richtig geil...danke","",""
"323371864074485771","mole99","2025-11-19T19:07:07.7950000+00:00","And here is my entry in the list of layout renderers. It simply uses KLayout (`pip install klayout`) to render the layout and can therefore load both GDS and OAS. I disabled the filler layers to make the layout stand out better.","",""
"323371864074485771","mole99","2025-11-19T19:07:12.7140000+00:00","","project-template_media/fabulous_fpga-A6060.png",""
"323371864074485771","mole99","2025-11-19T19:07:47.3080000+00:00","","project-template_media/lay2img-E79C6.py",""
"323371864074485771","mole99","2025-11-19T19:08:38.9330000+00:00","You can run it as `python3 lay2img.py librelane/runs/<timestamp>/final/gds/chip_top.gds image --width 4069 --height 6144` in the root of your repository.","",""
