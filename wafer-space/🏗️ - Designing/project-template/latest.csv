AuthorID,Author,Date,Content,Attachments,Reactions
"323371864074485771","mole99","2025-10-02T16:40:54.7030000+00:00","üì¢ Major update to the [gf180mcu-project-template](https://github.com/wafer-space/gf180mcu-project-template)! 

The example design now runs through the complete flow, including:

- Sealring insertion
- Filler generation

... and is DRC and LVS clean, according to the open source PDK.

There is now also a [cocotb](https://www.cocotb.org/) testbench available in the repository. We use the newly released cocotb 2.0.0.
You can run RTL as well as GL simulations, after implementing the design.

To ensure your design will be accepted for tapeout, you will be able to run the [gf180mcu-precheck](https://github.com/wafer-space/gf180mcu-precheck).
At the moment it is still a work in progress.

Further updates will follow, but you can use the current state as a stable basis for implementing your design.
If you encounter any issues, please report them so that we can improve both the template and the PDK.

PS: Special thanks to @Tim Edwards for his help in solving the uncovered PDK and tool-related issues.

Leo","","üëç (2)"
"1365118310701600900","rtimothyedwards_19428","2025-10-02T16:45:37.7310000+00:00","Tim Edwards has only barely begun to address all the issues that have surfaced over the past few weeks. . .","",""
"220639106915368960","tholin","2025-10-02T16:48:14.9130000+00:00","Its that bad?","",""
"323371864074485771","mole99","2025-10-02T16:48:50.2490000+00:00","Haha, I also have to upstream a number of LibreLane related patches üòÑ","",""
"323371864074485771","mole99","2025-10-02T16:51:01.8090000+00:00","Also I forgot to mention that it is now possible to adjust the padring directly from the LibreLane configuration file.","",""
"543162393413287956","h.tamas","2025-10-02T17:09:34.2980000+00:00","Started a thread.","",""
"1365118310701600900","rtimothyedwards_19428","2025-10-02T18:04:34.9260000+00:00","@Tholin :  Well, it means there's a lot to do if we want people to have successful tapeouts.","",""
"220639106915368960","tholin","2025-10-02T18:10:12.9330000+00:00","Bad time for me to be designing analog layouts?","",""
"1365118310701600900","rtimothyedwards_19428","2025-10-02T18:15:42.7890000+00:00","@Tholin :  Great time for you to be designing analog layouts!  That will help flush out a lot of issues.  Make sure that you spot-check designs against the documented rules occasionally and let me know about anything that looks wrong.  Feel free to post a layout to me if you want me to double-check it for issues.","",""
"169786952432746498","mithro_","2025-10-02T18:16:50.8010000+00:00","See what @Tim Edwards said! üôÇ","",""
"220639106915368960","tholin","2025-10-02T18:20:36.1800000+00:00","Alright, sounds good.","",""
"220639106915368960","tholin","2025-10-02T18:20:38.7230000+00:00","I'll keep going.","",""
"1413605821430104114","xintingjiang_36756","2025-10-04T01:11:24.8120000+00:00","I'm curious what is the current problem of this template, is this made the nov gf180 mpw shuttle","",""
"169786952432746498","mithro_","2025-10-04T01:23:57.0660000+00:00","@Xinting Jiang - It should be usable but just keep it up to date as you go.","","üëç (1)"
"323371864074485771","mole99","2025-10-04T07:35:48.1590000+00:00","Exactly. You can already get started with your design, just make sure to keep it up to date with the upstream template.","","üëç (1)"
"378788837452677120","asc9742","2025-10-11T03:01:33.4850000+00:00","@mole99 Hi Leo, I am trying to replace all 56 user pads with analog pads (gf180mcu_fd_io_asig_5p0). Got this error ""No shape in terminal analog[0\].pad/ASIG5V found on layer Metal5"". Any ideas on this issue? Attached a screenshot + the yaml and system verilog files.","project-template_media/image-B347D.png,project-template_media/config_sv_files-19959.zip",""
"323371864074485771","mole99","2025-10-11T08:20:24.0460000+00:00","Hi @asc, there was a port missing for the bondpad BTerm in the `gf180mcu_fd_io__asig_5p0` cell.
If you update your PDK, it should run through now.","","üëç (1)"
"378788837452677120","asc9742","2025-10-11T16:52:17.3220000+00:00","Thank you @mole99 Ran into a new problem with the global routing. I had exchanged all user pads with analog pads, including the clk and rst pad. Could that be causing an issue?","project-template_media/image-6899C.png",""
"323371864074485771","mole99","2025-10-12T05:21:54.1300000+00:00","Yes, that will be a problem. The SDC expects at least one clock. Can you share a repository with your current state? I will take a look tomorrow.","",""
"323371864074485771","mole99","2025-10-13T11:59:05.9030000+00:00","Started a thread.","",""
"323371864074485771","mole99","2025-10-16T13:48:51.5630000+00:00","The [precheck](https://github.com/wafer-space/gf180mcu-precheck) has been updated to finish cleanly with the example project.
The precheck is your gateway to fabrication and will need to be completed via the online platform (coming soon).
You can, of course, run it locally to more easily debug failures.

If you are working on a design, please give it a try and let us know how it goes (SRAMs should still throw errors, that's being worked on next).
Most importantly: please let us know if you can ""cheat"" your way through the precheck üòâ","",""
"220639106915368960","tholin","2025-10-16T14:07:24.1880000+00:00","@mole99 I just updated my project with the changes from the template and since one of the commits reads ""Update LibreLane"", I tried running LL on example_project again to see if the error during GLB is gone. Instead, it now fails even earlier during STA.","",""
"323371864074485771","mole99","2025-10-16T14:35:17.3590000+00:00","Started a thread.","",""
"1338991700084785204","jalf_47390","2025-10-16T20:46:53.3630000+00:00","@mole99 Is there any ESD protection in the IO pins in the template or is it required to be added? If it is in there already, what did you include? Same for all pins differences between them?","",""
"323371864074485771","mole99","2025-10-17T04:56:22.4540000+00:00","Started a thread.","",""
"384390069412429834","polyfractal","2025-10-20T01:08:58.4810000+00:00","how much memory does the `make librelane` step need (roughly)? I fired up an old linux laptop to play around with everything and it crashed after eating 16gb RAM + 4gb swap üôÇ  Curious if I should just increase swap and let it run, or if it really needs like 32 or 64gb?","",""
"384390069412429834","polyfractal","2025-10-20T03:58:22.0310000+00:00","more swap did the trick üôÇ","","waferspace (1),üëç (1)"
"323371864074485771","mole99","2025-10-20T06:32:43.3060000+00:00","It depends on your design üòÅ
Yesterday, I implemented the example template on my laptop, which also has 16 GB of RAM, and it had to use swap as well.

The step that uses the most memory atm is most likely the filler generation.
There you can easily trade off memory consumption by changing the number of tiles (threads) and their size.
I will add some LibreLane configuration variables so that this can be easily tweaked directly from the config.
In the meantime, you can pass the `--jobs` argument to LibreLane to limit the global thread limit across all steps.","","üëç (1)"
"323371864074485771","mole99","2025-10-20T07:40:55.2900000+00:00","Never mind, none of that will be necessary anymore üòÖ

I've just fixed an embarrassing bug in the filler generation script: https://github.com/wafer-space/gf180mcu/commit/57a5725eb4a722cb148ff8cf84c5f22ce0be8d64
Now, filler generation uses only a fraction of the memory and completes much faster.
Always double check how functions are supposed to be used (the naming actually said it all üòÑ).","",""
"323371864074485771","mole99","2025-10-20T07:42:57.7650000+00:00","üì¢ Please update your project templates and pull the latest changes from the PDK!","",""
"384390069412429834","polyfractal","2025-10-20T13:51:32.8920000+00:00","awesome, thanks @mole99!","","üëå (1)"
"492702620759228416","mattvenn","2025-10-20T22:17:17.8050000+00:00","when will the submission system be open?","","üíú (1)"
"323371864074485771","mole99","2025-10-21T06:22:41.6860000+00:00","That's for @Tim 'mithro' Ansell to say.","",""
"169786952432746498","mithro_","2025-10-21T08:53:49.1730000+00:00","@Matt Venn - Hopefully in the next week.","",""
"220639106915368960","tholin","2025-10-26T19:54:47.9740000+00:00","That's quite a lot of VDD and VSS pads on the template. Like 10 each. That seems a bit excessive. What is the max current per pad?","",""
"169786952432746498","mithro_","2025-10-27T02:50:36.7770000+00:00","","",""
"169786952432746498","mithro_","2025-10-27T02:51:12.1350000+00:00","@Tholin - That was from @tnt in the #cob channel.","",""
"220639106915368960","tholin","2025-10-27T08:12:04.7600000+00:00","Ah, I see. Thank you.","",""
"220639106915368960","tholin","2025-11-01T19:17:19.2950000+00:00","Getting some *extreme* hold violations when integrating a macro into chip_top that is not present when hardening the macro itself. Checking the logs, the worst slack is simply from the reset pad.","project-template_media/image-91CC9.png",""
"323874444344950794","markemer","2025-11-01T19:21:10.7870000+00:00","Is that in ns? If so, oof. And could it be a bad capacitance extraction on the pads themselves?","",""
"596068704471482370","246tnt","2025-11-01T19:28:49.0980000+00:00","That's probably because the macro has its own clock tree. So the clock that its internal FF sees is delayed by many ns compared to the clock on its input pin.","",""
"596068704471482370","246tnt","2025-11-01T19:29:29.2210000+00:00","If the CTS inside your top level project isn't setup to feed the macro an ""early clock"" (i.e. from the root of its clock tree instead of a leaf), that could explain why you see so many hold violations.","",""
"596068704471482370","246tnt","2025-11-01T19:30:27.2500000+00:00","(Just a theory of course ... can't do more than theorize without more data)","",""
"220639106915368960","tholin","2025-11-01T19:45:54.9430000+00:00","","project-template_media/image-226EA.png",""
"220639106915368960","tholin","2025-11-01T19:45:57.8170000+00:00","I don't have a repo for this yet","",""
"220639106915368960","tholin","2025-11-01T19:46:37.3770000+00:00","There is no CTS in the top level","",""
"220639106915368960","tholin","2025-11-01T19:46:50.7330000+00:00","Actually, there is no standard cells in the top level","",""
"220639106915368960","tholin","2025-11-01T19:46:58.4970000+00:00","Just macros","",""
"220639106915368960","tholin","2025-11-01T20:56:56.7900000+00:00","I guess this calls for a custom SDC file. I started by copying the SDC file provided by efabless for user project macros and will progressively modify it.","",""
"220639106915368960","tholin","2025-11-01T22:33:29.6630000+00:00","Literally nothing I do is changing the hold violations. Its refusing to budge.","",""
"220639106915368960","tholin","2025-11-02T16:16:59.0550000+00:00","Almost got it. Commit soon. Just trying to clean up my SDC file.","",""
"220639106915368960","tholin","2025-11-02T16:17:33.3310000+00:00","What‚Äôs the point of `set_driving_cell`? Does it automatically determine slew rates and delays, or do I still need to specify those manually?","",""
"220639106915368960","tholin","2025-11-02T16:42:54.8520000+00:00","Doesn‚Äôt matter. I cannot `set_driving_cell -lib_cell gf180mcu_fd_io__bi_24t` inside my macro SDC files anyways:","project-template_media/image-55734.png",""
"323371864074485771","mole99","2025-11-02T18:10:19.0380000+00:00","Do you use the LibreLane version from the template or [this branch](https://github.com/librelane/librelane/pull/806)?
Otherwise the pad cells are not read in.","",""
"220639106915368960","tholin","2025-11-02T18:16:37.9600000+00:00","I cannot use the LibreLane version from the template for my macros. Python error.","project-template_media/image-BC7E4.png",""
"220639106915368960","tholin","2025-11-02T18:17:00.5980000+00:00","I mean, the PDK Version","",""
"220639106915368960","tholin","2025-11-02T18:18:03.4310000+00:00","The error during GPL I reported before persists, so I cannot use the LibreLane version.","",""
"220639106915368960","tholin","2025-11-02T18:21:10.1310000+00:00","But I also don‚Äôt understand what `set_driving_cell` even does. Right now my approach has been to determine values to set on `set_input_delay` , `set_clock_latency`, `set_input_transition` and `set_clock_transition` by manually interpreting the values in the liberty files for the IO pads.","",""
"220639106915368960","tholin","2025-11-02T18:21:49.4350000+00:00","Except when it comes to the internal bus inside the chip, where I have to rely on STA for numbers.","",""
"220639106915368960","tholin","2025-11-02T18:23:29.5800000+00:00","Actually, it seems fine now, at least on this one macro, but there is still a big difference in behavior.","",""
"220639106915368960","tholin","2025-11-02T18:24:29.9480000+00:00","I just got to `Stage 37 - Resizer Timing Optimizations (Post-Clock Tree Synthesis)` on this CPU macro and on Iteration 0 its starting with a TNS of **-5042** compared to main librelane, where I got -250.","",""
"220639106915368960","tholin","2025-11-02T18:24:34.0150000+00:00","I changed nothing about the config.","",""
"220639106915368960","tholin","2025-11-02T18:24:41.0840000+00:00","Just switched LL versions.","",""
"220639106915368960","tholin","2025-11-02T19:22:54.5390000+00:00","Yeah, I‚Äôm getting severe performance degradation in the wafer.space template LL version in two ways. The timings of the design are worse, and also the flows take forever to run. After one hour, it is still stuck in Timing Optimizations. This whole flow used to take < 15 minutes. @mole99","",""
"220639106915368960","tholin","2025-11-03T00:24:06.3320000+00:00","@mole99 This page linked in the README of the template no longer exists.","project-template_media/image-C502E.png",""
"220639106915368960","tholin","2025-11-03T00:24:21.6870000+00:00","","project-template_media/image-6E9A7.png",""
"323371864074485771","mole99","2025-11-03T07:16:38.1700000+00:00","The wafer.space gf180mcu PDK requires the LibreLane version in the template (or from the branch).","",""
"323371864074485771","mole99","2025-11-03T07:17:31.9560000+00:00","The issue is still open at OpenROAD's side: https://github.com/The-OpenROAD-Project/OpenROAD/issues/8229
However, as mentioned before, you can simply disable timing driven placement.","",""
"323371864074485771","mole99","2025-11-03T07:18:21.9850000+00:00","`set_driving_cell` automates exactly that. It takes the values directly from the LIB.","",""
"323371864074485771","mole99","2025-11-03T07:19:37.4490000+00:00","Thanks for reminding me. The LibreLane docs have recently been updated.","",""
"220639106915368960","tholin","2025-11-03T08:12:50.6020000+00:00","Thank you. I could find 0 information about this command online.","",""
"596068704471482370","246tnt","2025-11-03T08:23:12.6560000+00:00","https://github.com/The-OpenROAD-Project/OpenSTA/blob/master/doc/OpenSTA.pdf","",""
"323371864074485771","mole99","2025-11-03T20:35:00.4780000+00:00","This is the ‚ú® magic ‚ú® line for the `gf180mcu_fd_ip_sram__sram512x8m8wm1` SRAM:

```
add_pdn_stripe -grid macro -layer Metal4 -width 2.36 -offset 1.18 -spacing 0.28 -pitch 426.86 -starts_with GROUND -number_of_straps 2
```

It adds a power/ground pair on each side of the SRAM macro, directly above the pins. Since this uses the local coordinate system of the macro, you can move the macro around as you wish, the PDN straps will follow. As the PDN straps go all the way across the macro, connecting them to the PDN above is very easy.","","‚ú® (1),üíØ (1)"
"323371864074485771","mole99","2025-11-03T20:35:19.5410000+00:00","(top left)","project-template_media/Bildschirmfoto_vom_2025-11-03_21-13-08-89A4F.png",""
"323371864074485771","mole99","2025-11-03T20:35:30.9510000+00:00","(top right)","project-template_media/Bildschirmfoto_vom_2025-11-03_21-13-33-4F47A.png",""
"323371864074485771","mole99","2025-11-03T20:35:41.7230000+00:00","If you rotate the SRAM by 90 or 270 degrees, you need to use this line:

```
add_pdn_stripe -grid sram_macros_WE -layer Metal4 -width 2.36 -offset 1.18 -spacing 0.28 -pitch 479.88 -starts_with GROUND -number_of_straps 2
```

Unfortunately, the connection to VSS is not as good on the right side. It is better to use the first orientation.

Don't forget the PDN connect:

```
add_pdn_connect \
    -grid macro \
    -layers ""$::env(PDN_VERTICAL_LAYER) Metal3""
```","",""
"323371864074485771","mole99","2025-11-03T20:35:48.6920000+00:00","","project-template_media/Bildschirmfoto_vom_2025-11-03_21-30-41-0737D.png",""
"323371864074485771","mole99","2025-11-03T20:35:58.0500000+00:00","Now I just need to make magic DRC happy, and then I can push the the example usage of the SRAM to the template repo.","",""
"220639106915368960","tholin","2025-11-03T20:36:05.7920000+00:00","Awesome","",""
"220639106915368960","tholin","2025-11-03T20:36:34.4290000+00:00","I re-used my setup from GFMPW with a wrapper macro for the SRAM that just added the Metal4 strips.","",""
"220639106915368960","tholin","2025-11-03T20:36:54.7980000+00:00","Which is not optimal","",""
"323371864074485771","mole99","2025-11-03T20:37:45.9190000+00:00","Well, if I remember correctly, Efabless used your solution too :)","",""
"220639106915368960","tholin","2025-11-03T20:37:58.0510000+00:00","Yeah. That‚Äôs where I got it from.","","üëç (1)"
"323371864074485771","mole99","2025-11-03T20:45:51.7880000+00:00","Started a thread.","",""
"274535015969456128","greg.hashtag.9468","2025-11-05T05:53:26.9610000+00:00","I've setup a new system following the readme. And then just run the stock template as a sanity check, it does complete. But I'm seeing KLayout DRC errors. (along with timing/cap/slew warnings at some corners)
```
...
    ""DM4.8"": 0,
    ""DF.12"": 3,
    ""NW.2b_MV"": 16,
    ""DPF.4"": 38,
    ""DCF.4"": 48,
    ""total"": 105
}
```
Is this expected? Or does it indicate something I should debug with my environment first?","",""
"323371864074485771","mole99","2025-11-05T07:38:06.3810000+00:00","Started a thread.","",""
"323371864074485771","mole99","2025-11-06T10:32:49.2960000+00:00","üì¢ It's update time!

The project template has been updated with support for the foundry SRAMs!
Two SRAMs of type `sram512x8m8wm1` are instantiated in `chip_core` and placed inside the chip in two different orientations (north and east).
If you add more SRAMs, make sure to update the LibreLane config (`librelane/config.yaml`) and the PDN configuration (`librelane/pdn_cfg.tcl`).

In addition, an issue has been fixed with filler generation, the way how the KLayout DRC deck was invoked (connectivity rules), and an error in the seal ring generator. With these changes the template is now DRC clean for both the magic and KLayout DRC deck.
Furthermore, the design is LVS clean and the there are no setup and hold violations for this example.

Please update your projects to the latest template, and don't forget to update the PDK as well (`make clone-pdk`).
Let me know if you have any questions.","","waferspace (5),üëç (2),üéâ (1)"
"220639106915368960","tholin","2025-11-06T22:46:24.2640000+00:00","Updated my AS2650v2 wafer.space port to use the new method for instantiating SRAMs.","","üíú (1)"
"220639106915368960","tholin","2025-11-06T22:46:30.3660000+00:00","Works!","",""
"323371864074485771","mole99","2025-11-07T05:46:39.4190000+00:00","Great to hear üëèüèª","",""
"169786952432746498","mithro_","2025-11-07T12:03:41.6530000+00:00","Pinned a message.","",""
"169786952432746498","mithro_","2025-11-07T12:04:09.3990000+00:00","@mole99 - Has performance / RAM usage changed much in the latest updates?","",""
"323371864074485771","mole99","2025-11-07T12:26:01.5640000+00:00","RAM usage has gone down drastically during the filler generation step after I fixed a bug there. However, that was already before this update.","",""
"596068704471482370","246tnt","2025-11-17T10:35:40.9980000+00:00","How long does the template build (default) take for people ?","",""
"596068704471482370","246tnt","2025-11-17T10:35:54.8040000+00:00","Just wondering if my vm is slow or something ...","",""
"323371864074485771","mole99","2025-11-17T10:39:06.4170000+00:00","The CI takes around 50mins without DRC: https://github.com/wafer-space/gf180mcu-project-template/actions/runs/19297076321/job/55181634117
Locally, it's faster for me. The DRC can then take an additional 1‚Äì1.5 hours.","","üëç (1)"
"596068704471482370","246tnt","2025-11-17T13:35:45.0040000+00:00","Here full run took 3h30 üòÖ 
Looking at timestamps, klayout drc was 2h 48 min of that.","",""
"220639106915368960","tholin","2025-11-17T13:36:45.6560000+00:00","What? My top-level DRC runs don't take nearly as long.","",""
"220639106915368960","tholin","2025-11-17T13:37:32.0650000+00:00","I'm also still struggling with analog pads not getting wired up.","",""
"323371864074485771","mole99","2025-11-17T14:18:46.6320000+00:00","Just had a full run (inlcuding DRC) in 48:05 using the template üòÅ","",""
"596068704471482370","246tnt","2025-11-17T14:21:15.2210000+00:00","Huh ... that's worrying ...","",""
"220639106915368960","tholin","2025-11-17T17:57:17.3190000+00:00","Something changed. KLayout DRC is so much slower now.","",""
"323371864074485771","mole99","2025-11-17T18:52:44.9820000+00:00","There haven't been changes to the PDK for two weeks: https://github.com/wafer-space/gf180mcu
Although a number of changes are coming up.","",""
"220639106915368960","tholin","2025-11-17T21:17:26.0910000+00:00","And why are my analog signals not getting routed?","project-template_media/image-C20A2.png","üòÆ (1)"
"220639106915368960","tholin","2025-11-17T21:31:46.2870000+00:00","I CTRL+F‚Äôd for ""analog"" in the global routing logs and found nothing. Its skipping it.","",""
"596068704471482370","246tnt","2025-11-17T21:33:46.8780000+00:00","Are they defined any differently in your netlist ?","",""
"220639106915368960","tholin","2025-11-17T21:35:21.6610000+00:00","No","",""
"538398807986274304","rzioma","2025-11-18T11:26:35.7690000+00:00","Z80 design is finally green on github \o/
@mole99 is there a way to download artifacts / GDS from github job for local inspection? *I feel quite dumb for asking, but I couldn't figure how to do it so far*","project-template_media/image-95F6F.png","üéâ (1)"
"538398807986274304","rzioma","2025-11-18T11:30:06.2530000+00:00","Ah, when building locally on Mac it is necessary to increase file-descriptor count otherwise Magic streamout fails `ulimit -n 1024`","",""
"538398807986274304","rzioma","2025-11-18T11:32:04.7010000+00:00","@mole99 I tried to add `ulimit` to flake.nix as shell hook, but failing so far even with ChatGPT *""help""* üòì","",""
"323371864074485771","mole99","2025-11-18T11:43:30.1240000+00:00","Hi ReJ! Congrats üëè
Just so you know, the CI only runs the implementation, as the DRC requires too much memory. So you need to make sure to run DRC locally.

Yes, there are ways to upload artifacts: https://docs.github.com/en/actions/tutorials/store-and-share-data
I haven't added this to the CI yet since I though it would quicky fill up the available storage space. But perhaps with a compression of the artifacts and a short retention time, it could be fine?","","‚ù§Ô∏è (1)"
"538398807986274304","rzioma","2025-11-18T11:45:50.2380000+00:00","For some reason I get hold violations when I build locally (MacOS could be a problem here üòâ ), but it is fine building on github. Investigating atm.","",""
"323371864074485771","mole99","2025-11-18T11:59:07.3670000+00:00","The Nix flake in the template uses LibreLane's create-shell: https://github.com/librelane/librelane/blob/dev/nix/create-shell.nix
It seems that mkShell has a `shellHook` that could be used for that. However, I'm not sure how to override this from the template.","","üëç (1)"
"323371864074485771","mole99","2025-11-18T12:02:40.4050000+00:00","Strange. There may be slight differences between the Linux and mac version of OpenROAD. If your hold violations are only just over the limit, perhaps that could make the difference.
Make sure your clock tree is good, and you could increase the `PL_RESIZER_HOLD_SLACK_MARGIN`.","",""
"220639106915368960","tholin","2025-11-18T12:21:33.0050000+00:00","All of my configs contain
```
GRT_RESIZER_HOLD_SLACK_MARGIN: 0.1
PL_RESIZER_HOLD_SLACK_MARGIN: 0.1
PL_RESIZER_HOLD_MAX_BUFFER_PCT: 100
```
by default now since I had hold violations screw me over before.","","üëç (1)"
"738396032295108721","bailey8889","2025-11-18T12:45:40.1220000+00:00","@ReJ aka Renaldas Zioma If you're just running a batch job with no editing, you probably don't need file locking. Disabling this with the magic command `locking disable` may allow you to load large designs without changing the ulimit. http://opencircuitdesign.com/magic/commandref/locking.html","","üëç (1)"
"803213471402688522","_luke_w_","2025-11-18T15:43:17.6470000+00:00","Is it expected to get some antenna violations from building the project template?
```
* Antenna
Failed êÑÇ
Pin violations: 17
Net violations: 11
Check the report directory of OpenROAD.CheckAntennas.
```

checking the CI run here I do see the same violations: https://github.com/wafer-space/gf180mcu-project-template/actions/runs/19297076321/job/55181634117","",""
"596068704471482370","246tnt","2025-11-18T15:47:07.7430000+00:00","Yes","",""
"803213471402688522","_luke_w_","2025-11-18T15:47:38.2630000+00:00","Ok, thanks üôÇ are they concerning or just something to waive?","",""
"323371864074485771","mole99","2025-11-18T16:08:21.3440000+00:00","That is something that requires a closer look into OpenROAD and LibreLane in order to find a proper solution. For large ratios you can manually insert ECO diodes.

So far, most (all?) Tiny Tapeout designs seem to work just fine, and almost all of them have some antenna violations.","","‚ù§Ô∏è (1)"
"323371864074485771","mole99","2025-11-18T16:09:22.2250000+00:00","Search for `INSERT_ECO_DIODES` in https://librelane.readthedocs.io/en/latest/reference/step_config_vars.html","",""
"803213471402688522","_luke_w_","2025-11-18T17:25:23.7510000+00:00","Thanks, I guess I'll worry about that later then üòÖ","","üòÅ (1)"
"803213471402688522","_luke_w_","2025-11-18T17:25:55.7690000+00:00","In `chip_core.sv` in the example project, why does it have `keep` attributes on the SRAM? Are they just left in from initial hacking or are they required?

```
    logic [7:0] sram_0_out;

    (* keep *)
    gf180mcu_fd_ip_sram__sram512x8m8wm1 sram_0 (
        `ifdef USE_POWER_PINS
        .VDD  (VDD),
        .VSS  (VSS),
        `endif

        .CLK  (clk),
        .CEN  (1'b1),
        .GWEN (1'b0),
        .WEN  (8'b0),
        .A    ('0),
        .D    ('0),
        .Q    (sram_0_out)
    );
```","",""
"803213471402688522","_luke_w_","2025-11-18T17:26:56.7920000+00:00","I will happily cargo cult it into my own memory wrappers, I was just curious","",""
"323371864074485771","mole99","2025-11-18T17:28:36.3930000+00:00","The former. You should be able to remove the `(* keep *)` and since Yosys sees that the outputs of the macro are being used, it will keep it. I'll remove it the next time I push another change to the template :)","",""
"803213471402688522","_luke_w_","2025-11-18T17:29:01.1470000+00:00","ok nice thanks, I thought that would be the case but wasn't sure if there were hidden gotchas","","üëç (1)"
"803213471402688522","_luke_w_","2025-11-18T17:30:15.9540000+00:00","flow related question (if the answer is ""RTFM"" I can attempt to do that): in our ASIC flow at work, if I hand-instantiate a cell then the buffer width can be changed during layout but otherwise it'll remain the same cell with the same hierarchical path. Is that the case here or do I need to add `(* dont_touch keep *)` etc to my cell wrappers?","",""
"323371864074485771","mole99","2025-11-18T17:34:17.1230000+00:00","Cell attributes are currently not retained. You can set `SYNTH_WRITE_NOATTR` to false and they should be passed on to OpenROAD.
However, there's `RSZ_DONT_TOUCH_RX` and `RSZ_DONT_TOUCH_LIST` if you want to keep a cell or net untouched.
I think if you just set the `(* keep *)` attribute on a stdcell, Yosys will instantiate the stdcell and OpenROAD is free to change it's buffer width.","","üëç (1)"
"803213471402688522","_luke_w_","2025-11-18T17:34:51.4930000+00:00","nice, thanks","",""
"803213471402688522","_luke_w_","2025-11-18T17:35:33.0960000+00:00","so it sounds like just putting `(* keep *)` on my cells is what I want; quite happy for the tools to change the drive as I don't fancy going and fixing all the transition violations myself üôÇ","","üëå (1)"
"543162393413287956","h.tamas","2025-11-18T17:44:35.0370000+00:00","FYI time driven placement (enabled by default) ignores the `RSZ_DONT_TOUCH_*` setting and resizes the cells nonetheless. You can work around it by setting `PL_TIME_DRIVEN` to 0.","",""
"323371864074485771","mole99","2025-11-18T17:47:17.3720000+00:00","Yes, that is actually a ""bug"" in LibreLane as `dont_touch` does not prevent placement. So we could actually keep the attribute throughout GPL. See here: https://github.com/librelane/librelane/issues/695","","üëç (1)"
"803213471402688522","_luke_w_","2025-11-18T20:32:43.7750000+00:00","Some incredibly minor DRCs (SRAM VDD/VSS *completely unconnected* while I figure out how the hierarchical paths are escaped) but in theory here is a processor, JTAG and 4 kB of RAM. Thanks for making the template, it made it super fast to get started üòÑ","project-template_media/image-DCA97.png","‚ù§Ô∏è (3),üéâ (2)"
"803213471402688522","_luke_w_","2025-11-18T20:35:09.0490000+00:00","Also I may have mixed up the SRAM dimensions and there is only a 15 um routing channel between the two rows ü§î","",""
"803213471402688522","_luke_w_","2025-11-18T22:57:18.3040000+00:00","I'm guessing it's expected that the `librelane-magicdrc` makefile target crashes out during klayout/magic XOR, since klayout was skipped?","",""
"803213471402688522","_luke_w_","2025-11-18T22:59:02.0150000+00:00","i.e.

```
Reading /home/luke/proj/riscboy-180/librelane/runs/RUN_2025-11-18_22-06-42/56-magic-streamout/chip_top.magic.gds ..
ERROR: In /nix/store/g3fml7j9yabcq2cmqm5yh19fxrm1h919-python3-3.12.10-env/lib/python3.12/site-packages/librelane/scripts/klayout/xor.drc: 'source': Stream has unknown format: /home/luke/proj/riscboy-180/librelane/runs/RUN_2025-11-18_22-06-42/56-magic-streamout/chip_top.magic.gds in Layout::read
Total elapsed: 0.010s  Memory: 413.00M
ERROR: RuntimeError: 'source': Stream has unknown format: /home/luke/proj/riscboy-180/librelane/runs/RUN_2025-11-18_22-06-42/56-magic-streamout/chip_top.magic.gds in Layout::read in Executable::execute
  /nix/store/g3fml7j9yabcq2cmqm5yh19fxrm1h919-python3-3.12.10-env/lib/python3.12/site-packages/librelane/scripts/klayout/xor.drc:78:in `execute'
  :/built-in-macros/drc_interpreters.lym:31:in `instance_eval'
  :/built-in-macros/drc_interpreters.lym:31:in `execute'
/home/luke/proj/riscboy-180/librelane/runs/RUN_2025-11-18_22-06-42/56-magic-streamout/chip_top.magic.gds
/home/luke/proj/riscboy-180/librelane/runs/RUN_2025-11-18_22-06-42/57-klayout-streamout/chip_top.klayout.gds
```

if it's a known issue with that target then I won't bother debugging üôÇ","",""
"803213471402688522","_luke_w_","2025-11-18T23:05:24.3230000+00:00","Does this YAML config go anywhere other than `chip_top.sdc`?

```
# Clock
CLOCK_PORT: clk_PAD
CLOCK_NET: clk_pad/Y

CLOCK_PERIOD: 40 # 25 MHz
```

I saw the warning about multiple clocks in there but hoping I can just ignore that and write a normal `.sdc` file.","",""
"323371864074485771","mole99","2025-11-19T07:20:41.5210000+00:00","Started a thread.","",""
"323371864074485771","mole99","2025-11-19T07:22:52.3250000+00:00","From what I know, this is only passed on to the SDC file.
Yes, you should be able to fully customize your SDC.","","üëç (1)"
"538398807986274304","rzioma","2025-11-19T07:50:20.2110000+00:00","DRC is passing (minus some antenna violations).
Tiny Z80 looks so lonely in there.","project-template_media/Pasted_Graphic_12-0D70E.png","blobclap (4)"
"538398807986274304","rzioma","2025-11-19T07:55:35.9470000+00:00","@mole99  However I ran into some problems with `gf180mcu-precheck` repository. It:
- crashes on my Ubuntu machine (*perhaps running out of memory, investigating*) during the Density check
- fails to find qrcode library on OSX machine (*Error: Couldn't load the qrcode library.  *)","",""
"323371864074485771","mole99","2025-11-19T07:58:33.3400000+00:00","Congrats! üëè
You did enable the environment within the precheck, right?
Because I specifically request the `qrcode` Python module üòÖ
https://github.com/wafer-space/gf180mcu-precheck/blob/1b639dff3d87a50e0759541701c7d162e1765630/flake.nix#L47","",""
"538398807986274304","rzioma","2025-11-19T08:03:18.2850000+00:00","ah, this might be the problem `pkgs.stdenv.isLinux`","","üòÜ (1)"
"323371864074485771","mole99","2025-11-19T08:04:58.2480000+00:00","You're absolutely right! It's a leftover from a different flake, I completely overlooked it.","",""
"323371864074485771","mole99","2025-11-19T08:05:14.7520000+00:00","Pushing a fix shortly...","","‚ù§Ô∏è (1)"
"323371864074485771","mole99","2025-11-19T08:09:15.9240000+00:00","@ReJ aka Renaldas Zioma You can give it another try now.","","üëç (1)"
"538398807986274304","rzioma","2025-11-19T11:00:22.0450000+00:00","Worked like a charm. Precheck passed!","","ü•≥ (2)"
"384390069412429834","polyfractal","2025-11-19T14:55:25.7120000+00:00","is there an additional log to get more information about librelane build failures? Trying a test build of what I have to see the end-to-end workflow, and it's failing to wire up power pins to my sram macos (deep in the bowels of my project)

```
Connecting power net VDD to i_chip_core.u_core.tta_0.lsu_fu_0.sram_512x32_0.gf180mcu_fd_ip_sram__sram512x8m8wm1_0/VDD‚Ä¶
[INFO] Made 0 connections.
[06:50:13] ERROR    The following error was encountered while running the flow:  __main__.py:189 
    Odb.SetPowerConnections failed with the following errors:
         add_global_connections failed to make any connections for 'i_chip_core.u_core.tta_0.lsu_fu_0.sram_512x32_0.gf180mcu_fd_ip_sram__sram512x8m8wm1_0/VDD' to VDD. 
```

I've gone through and added the conditional stuff where needed
```
`ifdef USE_POWER_PINS
.VDD  (VDD),
.VSS  (VSS),
`endif
```","",""
"384390069412429834","polyfractal","2025-11-19T14:59:16.8390000+00:00","ah... yosys is deleting my sram module (and a bunch of other stuff)

`Deleting now unused module tta::sram::sram_512x32.  `","","üëç (1)"
"384390069412429834","polyfractal","2025-11-19T15:00:27.4400000+00:00","ok new question.... why? üòÇ  I know there's a ""keep"" annotation to force it, but I don't think any of this is dead code? but I have no idea how synthesizing works","",""
"323371864074485771","mole99","2025-11-19T15:00:33.5980000+00:00","You can find all log files and artifacts in the `librelane/runs/*` directory.
Making the power connections in the RTL is one way, the other is to use `PDN_MACRO_CONNECTIONS`.","","üëÄ (1)"
"384390069412429834","polyfractal","2025-11-19T15:01:18.4580000+00:00","aha! `PDN_MACRO_CONNECTIONS` looks much more convenient","",""
"323371864074485771","mole99","2025-11-19T15:01:59.7410000+00:00","Yes, if Yosys removes the SRAM instances, it's because it recognises that none of the outputs are being used. Optoimizing it away üòÅ","",""
"323371864074485771","mole99","2025-11-19T15:02:17.5420000+00:00","So there is probably an issue in your RTL.","",""
"384390069412429834","polyfractal","2025-11-19T15:06:10.4330000+00:00","hm, it seems to be deleting basically my entire project üòÑ","project-template_media/image-5CCBB.png",""
"384390069412429834","polyfractal","2025-11-19T15:09:38.7690000+00:00","if a module doesn't have an output, does it get optimized away? I've only wired up inputs to my processor so far (clock, reset, uart loading, etc). so it can run programs but no output","",""
"220639106915368960","tholin","2025-11-19T15:13:18.9320000+00:00","Yes. Yosys checks input to output paths to see what it can optimize away, in my experience.","","üëç (1)"
"220639106915368960","tholin","2025-11-19T15:13:36.1500000+00:00","If it sees 0 outputs, it just goes ""this whole design is just void""","",""
"384390069412429834","polyfractal","2025-11-19T15:13:57.7200000+00:00","argh","",""
"384390069412429834","polyfractal","2025-11-19T15:14:01.1820000+00:00","gotcha, thanks!","",""
"384390069412429834","polyfractal","2025-11-19T15:55:19.1430000+00:00","wired in a temporary output, got the ball moving again! Just to confirm, it looks like the sram macros have to be placed manually on the die? (I see the placement stuff in pdn_cfg.tcl for the two macros in the demo chip_top)","",""
"384390069412429834","polyfractal","2025-11-19T15:55:59.0550000+00:00","and in the config toml","",""
"323371864074485771","mole99","2025-11-19T15:58:19.7440000+00:00","Yes exactly. Placement is defined in `config.yaml` and connection to PDN in `pdn_cfg.tcl`.","",""
"384390069412429834","polyfractal","2025-11-19T16:00:11.9220000+00:00","great, thank you! out of curiosity, is there a reason placements are done by hand instead of being auto-placed by librelane? because they are so large you want a human to do it?","",""
"384390069412429834","polyfractal","2025-11-19T16:02:57.6160000+00:00","(entirely new to this whole world, so lacking a lot of background context üôÇ )","",""
"323371864074485771","mole99","2025-11-19T16:18:59.3100000+00:00","No problem! In our case, manual placement is mostly fine, since there are only a handful of SRAM macros to place.
There was some effort to integrate OpenROAD's automatic macro placer into LibreLane, but it wasn't completed: https://github.com/librelane/librelane/issues/537","",""
"384390069412429834","polyfractal","2025-11-19T16:36:42.2400000+00:00","Makes sense. Juice probably isn't worth the squeeze given the nature of projects here. Easier to do it by hand üôÇ","",""
"803213471402688522","_luke_w_","2025-11-19T16:37:02.6070000+00:00","Not my domain (I do frontend) but I can take a couple of guesses at the reasons:

1. Difficult to move large macros later in pnr due to the number of ripups, so there's a high likelihood of automatic placement backing itself into a corner and making the design unroutable.

2.  Desire for consistency between implementation runs -- implementation is usually iterative with new RTL updates  regularly coming in, and you want to know whether issues are due to RTL changes etc as opposed to just the tools having a bad day

3. The power connections to macros like SRAMs etc are usually hand-tuned for best results, and you don't want to rip this up every time","","üëè (1),üëç (1)"
"803213471402688522","_luke_w_","2025-11-19T16:37:46.0820000+00:00","At least that's for the commercial projects I've worked on. Different dynamics for the new open-source stuff","",""
"384390069412429834","polyfractal","2025-11-19T16:38:08.3490000+00:00","Ahh interesting!","",""
"596068704471482370","246tnt","2025-11-19T16:39:10.2500000+00:00","I'd love to have suggestions though. Like it would just do a rough electrostatic-style placement  of all standard cells and macro to sort of see how things arrange themselves and make sure I'm not placing those macro at a very inconvenient spot.","","‚ù§Ô∏è (1),üíØ (1)"
"596068704471482370","246tnt","2025-11-19T16:39:26.2760000+00:00","And then I can lock it there and never move it while refining RTL.","",""
"803213471402688522","_luke_w_","2025-11-19T16:39:39.9240000+00:00","Yeah, like BRAM locking on FPGA üòÖ","",""
"803213471402688522","_luke_w_","2025-11-19T16:42:04.7000000+00:00","It's a really interesting question, I never thought about it. I just sort of accepted the layout folks at work spent days gently massaging the RAMs into place","",""
"384390069412429834","polyfractal","2025-11-19T17:44:04.4500000+00:00","still not 100% confident yosys didnt optimize away half the design and my laptop locked up so I'm not sure if it actually completed successfully before I had to go to work...but it did finish enough to generate an output GDS ü•≥ 

so much unused space üòÇ","project-template_media/Screenshot_From_2025-11-19_08-31-14-25A7F.png,project-template_media/Screenshot_From_2025-11-19_08-30-31-7065F.png","üëç (1),üëè (1)"
"840182560252624916","logic_anarchy","2025-11-19T17:56:18.3340000+00:00","My custom ASIC KianV SV32 SoC is now finalized!
RV32IMA + Zicntr/Zicsr/Zifencei/SSTC with full MMU ‚Äî running uLinux, Linux, and xv6.
With huge help from @mole99  ‚Äî and thanks to 
@Tim 'mithro' Ansell","project-template_media/G6IpKybXoAE1ATj-B5552.png,project-template_media/G6IqYgdXkAAk0MJ-1801C.png","ü•≥ (3),‚ù§Ô∏è (4),üëç (1)"
"384390069412429834","polyfractal","2025-11-19T18:08:09.1670000+00:00","Started a thread.","",""
"840182560252624916","logic_anarchy","2025-11-19T18:08:19.3200000+00:00","It will run mailine linux/uLinux/XV6 Unix or newer","project-template_media/Screenshot_from_2025-11-19_19-01-14-47AD1.png,project-template_media/Screenshot_from_2025-11-19_19-07-16-CE074.png",""
"840182560252624916","logic_anarchy","2025-11-19T18:30:35.6820000+00:00","I‚Äôve shared a Python script to render the chip layout from GDS. It‚Äôs pretty slow and memory-hungry, but it works. I‚Äôll put it on my GitHub repo later.","project-template_media/ieee_export_chip-E6A12.py","‚ù§Ô∏è (1)"
"384390069412429834","polyfractal","2025-11-19T18:33:51.2520000+00:00","definitely will try that when I get home!","",""
"220639106915368960","tholin","2025-11-19T18:49:58.5110000+00:00","This script generates 3D models and is multithreaded
https://github.com/AvalonSemiconductors/gfmpw1-multi/blob/main/gds2gltf.py","","‚ù§Ô∏è (2)"
"840182560252624916","logic_anarchy","2025-11-19T18:54:14.7500000+00:00","Richtig geil...danke","",""
"323371864074485771","mole99","2025-11-19T19:07:07.7950000+00:00","And here is my entry in the list of layout renderers. It simply uses KLayout (`pip install klayout`) to render the layout and can therefore load both GDS and OAS. I disabled the filler layers to make the layout stand out better.","",""
"323371864074485771","mole99","2025-11-19T19:07:12.7140000+00:00","","project-template_media/fabulous_fpga-A6060.png","‚ù§Ô∏è (2)"
"323371864074485771","mole99","2025-11-19T19:07:47.3080000+00:00","","project-template_media/lay2img-E79C6.py",""
"323371864074485771","mole99","2025-11-19T19:08:38.9330000+00:00","You can run it as `python3 lay2img.py librelane/runs/<timestamp>/final/gds/chip_top.gds image --width 4069 --height 6144` in the root of your repository.","",""
"220639106915368960","tholin","2025-11-19T19:29:02.6680000+00:00","Rendering the AS2650-2 with @logic anarchy ‚Äôs script shows some missing wires.","project-template_media/chip-7E506.png",""
"220639106915368960","tholin","2025-11-19T19:30:04.7170000+00:00","Watch your RAM use running this, btw. It gets intense.","","üòÆ (1),üíú (1)"
"169786952432746498","mithro_","2025-11-19T20:45:28.0860000+00:00","Super cool!","","‚ù§Ô∏è (1)"
"169786952432746498","mithro_","2025-11-19T20:47:14.7220000+00:00","Started a thread.","",""
"169786952432746498","mithro_","2025-11-19T20:50:05.0240000+00:00","What MCU is that Hazard3?","",""
"169786952432746498","mithro_","2025-11-19T20:52:30.3610000+00:00","Started a thread.","",""
"169786952432746498","mithro_","2025-11-19T20:54:48.2070000+00:00","Automatic macro placement stuff was one of the big things that Google's ML team did for the TPU","","üòÆ (1)"
"169786952432746498","mithro_","2025-11-19T20:55:43.3490000+00:00","https://github.com/google-research/circuit_training","","üòÆ (1)"
"803213471402688522","_luke_w_","2025-11-19T20:56:25.6000000+00:00","Yep, it's Hazard3. There will be at least two of them once I'm done (one for main game firmware and one for audio processing)","",""
"169786952432746498","mithro_","2025-11-19T20:56:43.7590000+00:00","What about one for graphics? üòõ","",""
"803213471402688522","_luke_w_","2025-11-19T20:56:54.0190000+00:00","RISCBoy PPU is already quite programmable","",""
"803213471402688522","_luke_w_","2025-11-19T20:57:09.2070000+00:00","and can do affine blits and stuff at 1 pix/clk","",""
"803213471402688522","_luke_w_","2025-11-19T20:57:22.8840000+00:00","so I'm planning to use that with external parallel async SRAM","",""
"803213471402688522","_luke_w_","2025-11-19T20:57:48.3170000+00:00","serial SPI LCD","","‚ù§Ô∏è (1)"
"169786952432746498","mithro_","2025-11-19T20:57:57.7540000+00:00","@mole99 - Maybe LibreLane needs container limits to stop locking computers up or something?","",""
"803213471402688522","_luke_w_","2025-11-19T20:58:35.1990000+00:00","would love to do DVI out but if I only have 13 days til final GDS then now is not the time for custom layout üòÖ","","üòÆ (1)"
"803213471402688522","_luke_w_","2025-11-19T20:59:29.4670000+00:00","I'll probably have some std cell-based DCOs on board to play with generating internal clocks but nothing of the quality you'd need for DVI","",""
"169786952432746498","mithro_","2025-11-19T20:59:36.8330000+00:00","Sleep is for the weak üòâ","",""
"803213471402688522","_luke_w_","2025-11-19T20:59:46.8200000+00:00","sleep is for two weeks from now","",""
"220639106915368960","tholin","2025-11-19T21:08:19.1810000+00:00","Oh. Tapeout is that soon?","",""
"220639106915368960","tholin","2025-11-19T21:08:24.7280000+00:00","Uhhhhh","",""
"220639106915368960","tholin","2025-11-19T21:08:29.9140000+00:00","Yeah, sleep is indeed for two weeks from now","",""
"169786952432746498","mithro_","2025-11-19T21:11:32.4870000+00:00","Dammit, there is too many cool things to look at in this channel and I need to be finishing the GDS prechecking on platform.wafer.space","","‚ù§Ô∏è (1)"
"840182560252624916","logic_anarchy","2025-11-19T21:13:24.9630000+00:00","Ja, Leo ist richtig geil!","project-template_media/chipw-55C88.png","üëè (1)"
"169786952432746498","mithro_","2025-11-19T22:24:49.0980000+00:00","We definitely need a gallery or something!","","üíØ (2),‚ù§Ô∏è (2)"
"384390069412429834","polyfractal","2025-11-19T22:54:31.0030000+00:00","hehe well I think we can blame my laptop for this one. the display/linux controlling it seems to get flaky in memory-constrained circumstances","",""
"384390069412429834","polyfractal","2025-11-19T22:54:49.3820000+00:00","(i also forgot to boost swap before starting it)","",""
"840182560252624916","logic_anarchy","2025-11-20T15:58:00.1960000+00:00","How we can do the same here, excluding gf180mcu_fd_sc_mcu7t5v0__oai21_1  @mole99 
https://discordapp.com/channels/1009193568256135208/1438584424554827788","",""
"323371864074485771","mole99","2025-11-20T17:11:45.9600000+00:00","üì¢ Since the last announcement, a number of important changes have been made to both the PDK and the template.

### PDK

1. [#3](https://github.com/wafer-space/gf180mcu/pull/3): The seal ring generator has been updated.
    - Now actually includes the glass cut.
    - Pplus does not overlap comp, as required by DRC.
2. [#3](https://github.com/wafer-space/gf180mcu/pull/3): Filler generation has been updated to ensure 10um spacing to the seal ring. (This was only a problem for smaller slot sizes).

### Template

1. The core ring now [connects to all vss pads again](https://github.com/wafer-space/gf180mcu-project-template/commit/c119e25b04b1dc3619bcd66cb508f901fd976410). (thanks @tnt!)
2. [#22](https://github.com/wafer-space/gf180mcu-project-template/pull/22): Magic has been updated with fix that significantly reduces peak memory usage.
3. [#21](https://github.com/wafer-space/gf180mcu-project-template/pull/21): The `render-image` Make target renders the GDS layout.
4. [#21](https://github.com/wafer-space/gf180mcu-project-template/pull/21): The CI has been updated.
    - Commands in the nix shell are now only executed once. (thanks @Egor Lukyanchenko!)
    - Create a summary and upload artifacts (gds and image) ([Example](https://github.com/wafer-space/gf180mcu-project-template/actions/runs/19543720582))
5. [#23](https://github.com/wafer-space/gf180mcu-project-template/pull/23): Workaround for a PDN issue.
6. [#24](https://github.com/wafer-space/gf180mcu-project-template/pull/24): Fix antenna violations using `DRT_ANTENNA_REPAIR_ITERS` (disable if any issues occur).
7. The [PDK version](https://github.com/wafer-space/gf180mcu-project-template/commit/b20168925c46fdd292e6084f31bfd8d312379d7e) has been pinned.

Please update your repository in line with the template and clone the latest PDK.","","‚ù§Ô∏è (6)"
"323371864074485771","mole99","2025-11-20T18:38:43.6640000+00:00","Pinned a message.","",""
"596068704471482370","246tnt","2025-11-20T21:08:51.2550000+00:00","@mole99 Is the environment of the leo/gf180 branch of libre lane good ? That's what I'm using since TT is not based at all on the template .","",""
"169786952432746498","mithro_","2025-11-20T22:08:50.9050000+00:00","Does the template have a CHANGELOG file or something? Seems like this would be great to include in that.","",""
"169786952432746498","mithro_","2025-11-20T22:09:25.9880000+00:00","@mole99 - BTW Did you see that I made the `git describe` version number work?","",""
"323371864074485771","mole99","2025-11-21T06:04:39.9270000+00:00","Yes, the template uses `leo/gf180mcu` as well.
Unfortunately, I still need to rebase from time to time, so any commit hashes that you reference might break.","",""
"596068704471482370","246tnt","2025-11-21T06:10:16.7160000+00:00","@mole99 I meant the nix environment of the `leo/gf180mcu`.  Digging a bit I think the magic version is different.","",""
"538398807986274304","rzioma","2025-11-21T06:11:48.4840000+00:00","@mole99 it might be a red herring, but I think I started getting KLayout DRC violations when running a **precheck**. This started after merging the latest template changes.

I get 12 drc errors and if I read it correctly (`drc.klayout.lyrdb` file) errors are in **sealring**","project-template_media/image-52BB2.png",""
"323371864074485771","mole99","2025-11-21T06:13:49.3840000+00:00","Right! I override the magic version in the template. There is no change in functionality, but it reduces peak RAM usage.
I can update nix-eda as a whole in the `leo/gf180mcu` branch once the latest Yosys hang is fixed.","",""
"323371864074485771","mole99","2025-11-21T06:15:59.8460000+00:00","ReJ, yes that is expected. Sorry! I still need to sync the precheck with the latest changes to the template. I started a run yesterday but didn't get to push the changes yet.","",""
"323371864074485771","mole99","2025-11-21T06:16:22.1050000+00:00","Yes, we can use versions and a changelog for the template from now on.","",""
"323371864074485771","mole99","2025-11-21T06:17:14.0910000+00:00","I would prefer tags in the format `x.y.z`, like in the gf180mcu repository.
I'll update the tag.","",""
"169786952432746498","mithro_","2025-11-21T06:18:23.3230000+00:00","with `git-describe` you get `v0.0-<commits>-<hash>` which some people map to `v0.0.<commits>`","",""
"169786952432746498","mithro_","2025-11-21T06:19:33.3500000+00:00","But I don't really care that enough, do what you prefer üôÇ","",""
"323371864074485771","mole99","2025-11-21T06:20:23.8980000+00:00","Yes, `git-describe` is really neat üòÅ 
I'm generally following the conventions in LibreLane to keep things simple.","",""
"538398807986274304","rzioma","2025-11-21T06:20:52.4260000+00:00","no worries! Happy to hear it is expected","","üëç (1)"
"538398807986274304","rzioma","2025-11-21T06:30:40.4230000+00:00","Random piece of information, template project also works fine with gf180mcu_fd_sc_mcu**9t**5v0","","üëå (1)"
"323371864074485771","mole99","2025-11-21T10:39:07.4640000+00:00","You could give this PR a try: https://github.com/wafer-space/gf180mcu-precheck/pull/3","",""
"596068704471482370","246tnt","2025-11-21T14:28:47.7230000+00:00","Antenna check is taking forever üò•  It's been an hour and I think it's still at Metal1.","",""
"220639106915368960","tholin","2025-11-21T14:32:38.0180000+00:00","I mean, you do have a lot of Metal1 in the layout if the whole core area has a standard cell grid in it.","",""
"220639106915368960","tholin","2025-11-21T14:33:04.6580000+00:00","My flows are faster than average, I believe, because I only have macros in the top-level and no cell grids.","",""
"596068704471482370","246tnt","2025-11-21T14:33:49.6350000+00:00","Well the top level of TT doesn't have any cell grid üòÖ","",""
"596068704471482370","246tnt","2025-11-21T14:34:26.2440000+00:00","and this test sample is only maybe ... 15~20% filled.","",""
"220639106915368960","tholin","2025-11-21T14:37:31.1340000+00:00","That‚Äôs probably already denser than my chip.","",""
"220639106915368960","tholin","2025-11-21T14:38:02.6050000+00:00","But antenna check takes a few seconds for me, so something seems wrong there.","",""
"596068704471482370","246tnt","2025-11-21T14:42:09.9210000+00:00","Are you talking about KLayout.Antenna or OpenROAD.CheckAntennas step ?","",""
"220639106915368960","tholin","2025-11-21T14:43:24.7660000+00:00","Both, I guess.","",""
"220639106915368960","tholin","2025-11-21T14:43:47.9050000+00:00","A step getting stuck for that long would be quite memorable and I don‚Äôt remember anything other than STA and DRC taking forever.","",""
"596068704471482370","246tnt","2025-11-21T14:44:17.5290000+00:00","Well https://github.com/AvalonSemiconductors/ws-submission-2025/blob/main/librelane/config.yaml#L6
It's disabled in your default config so you'd have to enable it to see it.","",""
"220639106915368960","tholin","2025-11-21T15:00:16.6930000+00:00","I just pushed to the repo","",""
"220639106915368960","tholin","2025-11-21T15:00:32.2900000+00:00","Has my analog pad fixes now","",""
"840182560252624916","logic_anarchy","2025-11-21T17:16:45.1530000+00:00","@tnt Should we enable it?","",""
"840182560252624916","logic_anarchy","2025-11-21T17:17:51.3000000+00:00","@mole99","project-template_media/Screenshot_from_2025-11-21_18-17-29-8EB09.png",""
"596068704471482370","246tnt","2025-11-21T17:18:28.7910000+00:00","It's been running here for 4h ....","",""
"596068704471482370","246tnt","2025-11-21T17:18:37.7850000+00:00","so I get why it's disabled üòÖ","","üòÆ (1)"
"803213471402688522","_luke_w_","2025-11-21T19:06:31.4110000+00:00","Does anyone know which step in the (template) flow is responsible for adding buffers on a high fanout net? I have a reset net with a fanout of ~1k and in my powered  netlist `./25-openroad-globalplacementskipio/chip_top.pnl.v` still has the reset synchroniser output going directly to all ~1k loads without buffering. This makes the following STAs meaningless because the reset net has like a 100 ns rise time","",""
"803213471402688522","_luke_w_","2025-11-21T19:46:46.3760000+00:00","ah, somewhat answered my own questions:

1. the buffers are added in the `repairdesignpostgpl` step
2. my issue with insane violations was actually because removing the clock variables from your `.yaml` and just defining clocks in your `.sdc` completely skips CTS, so I had like a 450 ns clock rise/fall, and all the flop timings are derated according to slew","","üòÆ (2)"
"169786952432746498","mithro_","2025-11-21T20:30:36.6370000+00:00","Does anyone have a design which currently fails precheck quickly?","",""
"169786952432746498","mithro_","2025-11-21T20:31:22.5930000+00:00","I need some test cases for the manufacturability checking testing","",""
"220639106915368960","tholin","2025-11-21T20:31:50.7340000+00:00","What if you just run precheck against a corrupted GDSII file so it fails just loading?","",""
"169786952432746498","mithro_","2025-11-21T20:38:14.8640000+00:00","Yeah, I can do those ones pretty easy, I'm other an otherwise compliant design that just has DRC violations.","",""
"169786952432746498","mithro_","2025-11-21T23:52:08.0800000+00:00","@mole99 - I believe your pull request to the precheck is now merged and the docker image got updated.","",""
"596068704471482370","246tnt","2025-11-22T07:48:24.6510000+00:00","Antenna check is going on 18h, so I think I'll give up on it üòÖ","",""
"323371864074485771","mole99","2025-11-22T08:12:54.2510000+00:00","Thanks!","",""
"323371864074485771","mole99","2025-11-22T08:14:05.5170000+00:00","Yeah, I also remember it taking forever during my testing üòÖ
For the second shuttle, I can look into rewriting/improving the KLayout antenna checks (there have been some updates to KLayout), or using a magic antenna check. But I don't see how we can possibly enforce zero antenna violations on the first shuttle.","",""
"538398807986274304","rzioma","2025-11-22T08:53:14.5230000+00:00","","",""
"754661674145022032","noritsunaimamura","2025-11-22T13:04:04.0670000+00:00","I ran a precheck on the GDS with PDK updated to 1.1.0 and new Filler and Sealing.
It has been successfully completed.
It took 4 hours and 36 minutes on Ubuntu24.04. The PC specifications are: ""Ryzen 3 Pro 4350G (4-core, 8-thread) & MEM: 64GB"".

However, when running on WSL, Klayout crashed when signals such as SIGKILL were sent  or no response. 
When I used about 14GB of memory, Klayout has crashed.

- Precheck Log
https://github.com/ishi-kai/ISHI-KAI_Multiple_Projects_WaferSapce-GF180-1/tree/main/precheck_log/RUN_2025-11-22_16-51-07
- Project GitHub
https://github.com/ishi-kai/ISHI-KAI_Multiple_Projects_WaferSapce-GF180-1","project-template_media/precheck_3rd_OK-9A554.png",""
"596068704471482370","246tnt","2025-11-22T13:57:24.2380000+00:00","Interesting I'm getting quite a few `Error while reading cell ""tt_gf_wrapper"" (byte position 137203656): Warning: cell ""Metal1_fill_cell"" placed on top of   itself.  Ignoring the extra one.` during the pre-check, maybe something's wrong somewhere in fill generation ?","",""
"323371864074485771","mole99","2025-11-22T14:10:39.2470000+00:00","You can ignore those for now. From what Tim had looked into it, these are most likely real overlapping cells generated by KLayout during filler generation.
I still need to prepare a reproducible for Matthias.","","üëå (2)"
"323371864074485771","mole99","2025-11-22T14:47:41.1210000+00:00","Hi @Noritsuna Imamura, with which error does KLayout crash?","",""
"754661674145022032","noritsunaimamura","2025-11-22T14:49:39.9550000+00:00","It's like this.","project-template_media/precheck_3rd_klayout_crash01-87886.png,project-template_media/precheck_3rd_klayout_crash02-A8A84.png,project-template_media/precheck_3rd_klayout_crash03-DD445.png,project-template_media/precheck_3rd_klayout_crash04-C1E15.png,project-template_media/precheck_3rd_klayout_crash05-367CB.png",""
"323371864074485771","mole99","2025-11-22T14:59:05.2900000+00:00","Could you please open an issue in the [precheck repo](https://github.com/wafer-space/gf180mcu-precheck) with all the details and a link to the GDS? Unfortunately, I cannot look into it right now, but I would like to try and see if it crashes on my end as well.

You should be able find the full KLayout log in the run directory.","","üÜó (1),done (1)"
"596068704471482370","246tnt","2025-11-22T15:02:34.5200000+00:00","It worries me a bit that 30 min into the execution of the klayout drc step, it hasn't even started with the ""Executing rule XXX"" phase of the check ü§î","",""
"220639106915368960","tholin","2025-11-22T17:20:14.9770000+00:00","Is there a way for me to run the KLayout DRC checks on a GDSII file without running the full chip_top flow? I just want to know if my DACs still have DRC errors without waiting 4+ hours for DRC to run on the full chip.","",""
"596068704471482370","246tnt","2025-11-22T17:22:48.7390000+00:00","`klayout -b -zz -r ${PDK_ROOT}/gf180mcuD/libs.tech/klayout/tech/drc/gf180mcu.drc -rd input=your.gds -rd report=drc.klayout.lyrdb -rd feol=True -rd beol=True -rd dummy=True -rd offgrid=True -rd conn_drc=True -rd wedge=True -rd run_mode=deep -rd thr=16`","",""
"596068704471482370","246tnt","2025-11-22T17:23:42.8340000+00:00","That's the command run by the pre-check.","",""
"220639106915368960","tholin","2025-11-22T17:30:50.1620000+00:00","Its so annoying to me that I can spend days putting something together in magic until its DRC clean, and then KLayout comes in ""Actshually, there is 107 DRC errors""","","üòÆ (1)"
"596068704471482370","246tnt","2025-11-22T17:39:59.5460000+00:00","I think that's pretty much the deal of being on this first run is that you're beta testing stuff ...","",""
"596068704471482370","246tnt","2025-11-22T17:43:29.0120000+00:00","Although I'm looking at some of the error in KLayout and ... they might be false positive.","","üòÆ (1)"
"220639106915368960","tholin","2025-11-22T17:44:51.6530000+00:00","I have tons of DRC errors for this. So uhm. Is it too long? Too short? What is the limit?","project-template_media/image-F7AF9.png",""
"220639106915368960","tholin","2025-11-22T17:45:27.8660000+00:00","Am I about to have to dive into some source code just to know what this is about?","",""
"220639106915368960","tholin","2025-11-22T17:46:25.0390000+00:00","No errors in magic","project-template_media/image-DC49F.png",""
"596068704471482370","246tnt","2025-11-22T17:47:08.0940000+00:00","Yes, looking at that now. I think there is a missing marker layer.","","üò¢ (1)"
"596068704471482370","246tnt","2025-11-22T17:47:37.6130000+00:00","5V and 6V transistors have no difference except the channel length.","",""
"220639106915368960","tholin","2025-11-22T17:48:10.7230000+00:00","What is the marker layer?","",""
"596068704471482370","246tnt","2025-11-22T17:48:10.7470000+00:00","And there is a marker layer (purely informational, doesn't mean anything for manufacturing) to tell klayout that a given transistor is meant to be 5V and not 6V.","",""
"596068704471482370","246tnt","2025-11-22T17:48:38.8060000+00:00","v5_xtor","",""
"596068704471482370","246tnt","2025-11-22T17:50:10.4760000+00:00","112/1","",""
"220639106915368960","tholin","2025-11-22T17:50:25.4600000+00:00","`string MASKHINTS_V5_XTOR` does not have an effect. Will actually have to draw this in KLayout.","",""
"596068704471482370","246tnt","2025-11-22T17:51:12.8530000+00:00","Yeah, MASKHINTS only works if support for maskhints for that particular layer is in the tech file.","",""
"596068704471482370","246tnt","2025-11-22T17:51:39.9030000+00:00","@Tim Edwards it seems `magic` isn't creating that layer at all, I see no support for writing it in the tech file ?","",""
"220639106915368960","tholin","2025-11-22T17:51:57.6670000+00:00","But also, these are supposed to be 6V devices","",""
"220639106915368960","tholin","2025-11-22T17:52:29.2100000+00:00","But also, magic extracts them as 5V?","",""
"220639106915368960","tholin","2025-11-22T17:52:56.1180000+00:00","There is weird things going on here","",""
"220639106915368960","tholin","2025-11-22T17:59:00.3790000+00:00","Oh no, the transistors are indeed too small for 6V devices - and magic doesn‚Äôt see a problem with that.","",""
"220639106915368960","tholin","2025-11-22T17:59:12.9650000+00:00","In other words, I‚Äôd like to report a bug...","",""
"596068704471482370","246tnt","2025-11-22T18:08:45.1740000+00:00","I'm guessing the `mv` devices (which are the ones used in your design) are meant to be the 5V one and the `hv` would be the 6V ones.","",""
"596068704471482370","246tnt","2025-11-22T18:10:03.1120000+00:00","Ah no, I think magic doesn't differentiate between 5V and 6V devices at all.","",""
"596068704471482370","246tnt","2025-11-22T18:10:26.3750000+00:00","both are `mvnfet` / `mvpfet` and it's just whatever length you use that will dictate which one it is ...","",""
"220639106915368960","tholin","2025-11-22T18:17:28.2920000+00:00","hv is 10V","",""
"220639106915368960","tholin","2025-11-22T18:18:31.8740000+00:00","GF180mcu has LV, MV 5V, MV 6V, Native Vt, HV LDMOS","",""
"220639106915368960","tholin","2025-11-22T18:18:52.1010000+00:00","Which are 3.3V, 5V, 6V, 6V and 10V respectively.","",""
"220639106915368960","tholin","2025-11-22T18:20:45.7410000+00:00","Here is another DRC error that I‚Äôm seeing a lot of in KLayout but that isn‚Äôt represented in magic.","project-template_media/image-C4F8A.png",""
"220639106915368960","tholin","2025-11-22T18:20:50.0710000+00:00","Even though it totally could be.","",""
"596068704471482370","246tnt","2025-11-22T18:25:32.0430000+00:00","I think there are also drc not checked by klayout because anything wider than 30u must be slitted and it didn't spot that.","",""
"596068704471482370","246tnt","2025-11-22T18:42:29.3870000+00:00","@mole99 I think the KLayout deck has issues.","",""
"596068704471482370","246tnt","2025-11-22T18:42:47.9290000+00:00","""M3.2b : Space to wide Metal3 (length & width > 10um) : 0.3¬µm""","project-template_media/2025-11-22_551x273_scrot-95CE6.png",""
"596068704471482370","246tnt","2025-11-22T18:43:17.7630000+00:00","That's a 0.28u trace ... hardly ""wide Metal3"".","","üòÆ (1)"
"1365118310701600900","rtimothyedwards_19428","2025-11-22T19:01:11.8700000+00:00","@Tholin :  Sorry, I was not following this conversation until Sylvain flagged me.
I keep trying to remind people that the magic DRC deck for GF180MCU was designed in a hurry for what was a digital-only tapeout from Efabless.  I made a ""good first pass"" at the analog rules and layers but there were no analog designs to validate it with.  I have made some corrections since then, but it is more or less in the same state.  I suppose the same goes for the klayout deck---No real validation in practice.","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-22T19:11:17.2180000+00:00","@Tholin :  I found the GF handling of ""5V"" devices to be awkward and looked for some method to be consistent.  It has never seemed reasonable to me that the same device can be either ""5V"" or ""6V"", and requires a marker layer to specify the _intent_ of it.  But mostly the issue of the way it is currently implemented in magic comes from early on struggling with what was _meant_ by a 5V or 6V transistor, along with largely unreadable documentation trying (badly) to explain it.  There were no 5V devices in the device model files originally.  I added those to the model files recently.  I could certainly redo the magic tech file to separate the 5V and 6V transistor types (now that there is a device model for each of them) and use the V5_XTOR (""FET5VDEF"" in the magic techfile) to distinguish them (and apply the device length rules separately for each of them).","",""
"596068704471482370","246tnt","2025-11-22T19:13:29.6370000+00:00","IMHO it's fine to only have `mv` to represent 5V/6V , but the `V5_XTOR` layer still need to be generated if length is too small to be 6V to comply with the DRC requirement ...  I'm not sure if that's something doable in the magic tech file ?","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-22T19:13:46.0350000+00:00","So it's not so much a bug as an implementation decision.  Given that (at the time I implemented it) there was only one device model, I just had magic extract that one device model and discarded the information from the V5_XTOR mask.  Either way, it's the same device, same model (my 5V model is just a copy of the 6V model, with a restriction on device length applied to the 6V model).","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-22T19:15:09.1550000+00:00","@tnt :  It can be done.  I assume the purpose is to have magic-generated GDS pass DRC in klayout?","",""
"596068704471482370","246tnt","2025-11-22T19:15:51.3300000+00:00","Yes. But also potentially any DRC GF themselves are running since this is in the design manual.","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-22T19:16:04.2750000+00:00","But I think that just implementing, say, ""mvpfet"" = 5V pfet and ""hvpfet"" = 6V pfet would be more consistent with the PDK overall.","",""
"596068704471482370","246tnt","2025-11-22T19:16:40.5500000+00:00","Sure, I have no strong opinion on that.","",""
"596068704471482370","246tnt","2025-11-22T19:17:14.4210000+00:00","The 10V one are `ld` if I read the tech file correctly.","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-22T19:34:27.8560000+00:00","Are there any published rules for V5_XTOR?  I can't find any in the open PDK documentation.  In the vendor libraries, it appears to cover entire cells, although I would assume it is only meaningful over the gate of the device.","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-22T19:48:39.6800000+00:00","@Tholin :  The magic tech file _does_ implement rule V1.3d;  where do you see it not flagging the rule?  (Note that the DRC documentation has no rule""V1.3d"", only ""V1.3"".  The ""d"" seems to have been invented by Mabrains when they make the klayout DRC deck.)","",""
"596068704471482370","246tnt","2025-11-22T19:49:38.8370000+00:00","https://gf180mcu-pdk.readthedocs.io/en/latest/physical_verification/design_manual/drm_07_08.html","",""
"596068704471482370","246tnt","2025-11-22T19:49:55.9030000+00:00","AFAICT it's just the gate over comp that needs to be covered.","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-22T19:52:01.2240000+00:00","@tnt : Thanks, I missed PL.11.  But PL.12 suggests that the diffusion as well as the gate must be covered.","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-22T19:53:34.3290000+00:00","Rule PL.12 might be intended to prevent mixing 5V and 6V devices in the same circuit.","",""
"596068704471482370","246tnt","2025-11-22T19:53:35.7020000+00:00","At least the klayout DRC only checks the gate.","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-22T19:53:52.6540000+00:00","But GF might flag PL.12.","",""
"596068704471482370","246tnt","2025-11-22T19:56:17.0960000+00:00","Yes. Without exactly a drawing for what PL.12 means, I'm not sure tbh.","",""
"596068704471482370","246tnt","2025-11-22T19:57:19.8950000+00:00","I like also how there is a drawing for PL.19 but then no PL.19 rule üòÖ","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-22T19:57:55.5670000+00:00","I'll start counting the issues in the rules and illustrations, and get back to you next week.","","ü§£ (1)"
"1365118310701600900","rtimothyedwards_19428","2025-11-22T20:04:00.1240000+00:00","It occurs to me that there must (?) also be ""cap_nmos_05v0"", ""cap_pmos_05v0"", ""cap_nmos_05v0_b"", and ""cap_pmos_05v0_b"" devices, but the devices themselves are just modeled as ideal capacitors (?!) and the models have no restriction on length and width.  Also, moscap-connected transistors in the SRAM are just transistors in the netlist.  Maybe the moscap device should just be quietly removed from the PDK. . .","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-22T20:27:57.4960000+00:00","@tnt :  Okay, I have reworked the GF tech file for magic, and pushed the change.  There is also a pending commit to add the 3.3V SRAM library to the open_pdks installation of GF180MCU, so it will all be mirrored to github by tomorrow.","","üëå (3)"
"596068704471482370","246tnt","2025-11-22T20:28:33.4780000+00:00","Oh wow, that was fast üòÖ","",""
"596068704471482370","246tnt","2025-11-22T20:28:36.7870000+00:00","Thanks !","",""
"803213471402688522","_luke_w_","2025-11-22T20:30:32.3390000+00:00","Is anyone else using clock gates (ICGs) in their designs? I'm getting ~2ns SRAM address hold violations with CPU on a gated clock and SRAM on an ungated version of the same clock. I saw TritonCTS had a `-balance_levels` switch (off by default, enabled by `CTS_BALANCE_LEVELS: True`), but it didn't seem to help with overall clock skew:

> -balance_levels Attempt to keep a similar number of levels in the clock tree across non-register cells (e.g., clock-gate or inverter). The default value is False, and the allowed values are bool.","",""
"803213471402688522","_luke_w_","2025-11-22T20:34:18.0810000+00:00","Related note: based on a tip in the Caravel report I found I could reduce overall clock skew by about 40% (2.8 -> 1.7 ns in post-CTS STA) by forcing Triton to always use the largest available clock buffer. Is there any reason not to make this the default? If you're tight on timing then it may even save area overall as you should need fewer fixups and resizes

```
# Force use of chonky bois to reduce clock skew (default list is 2, 4, 8)
CTS_CLK_BUFFERS:
  - ""gf180mcu_fd_sc_mcu7t5v0__clkbuf_16""
```","",""
"803213471402688522","_luke_w_","2025-11-22T21:12:15.3770000+00:00","Actually there is something suspicious in my CTS report:

```
Total number of Clock Roots: 6.
```

I have four defined clocks with two gates on one of those clocks. If I rebuild with the ICG cells removed, I get

```
Total number of Clock Roots: 4.
```
Is Triton treating each gate as a new root? Normally ICGs are just buffers for CTS purposes, and you'd explicitly define a root if you wanted a root","",""
"384390069412429834","polyfractal","2025-11-22T21:12:50.1400000+00:00","re: DRC, I assumed these were checks that GF provided, but I guess they are ""implemented"" based on written rules that GF publishes? What happens if we submit a design that validates fine but doesn't meet GF's internal checks?","",""
"384390069412429834","polyfractal","2025-11-22T21:13:10.2820000+00:00","or do they just YOLO it and you get back a bad wafer?","",""
"596068704471482370","246tnt","2025-11-22T21:13:39.7480000+00:00","GF definitely didn't provide the decks for KLayout and Magic üòÖ","",""
"596068704471482370","246tnt","2025-11-22T21:14:14.5430000+00:00","If it's the same as for Sky130, the fab runs their own deck and comes backs with a list of violations that need fixing.","",""
"596068704471482370","246tnt","2025-11-22T21:15:37.3680000+00:00","They usually only bother reporting the MR ( Manufacturing Rule ), i.e. the rules that would actually prevent manufacturing the thing at all.  There are also a bunch of rules that are not MR. i.e. they would affect the performance or function, but are not manufacturing risk, so they don't care so much, it's sort of your problem.","",""
"384390069412429834","polyfractal","2025-11-22T21:17:37.1110000+00:00","üëç  makes sense, thanks","",""
"1365118310701600900","rtimothyedwards_19428","2025-11-23T01:03:44.9540000+00:00","Actually I don't think GF had any concept of ""MR"" rules (or rather, no _documented_ ""MR"" rule set);  we (Efabless) went through the usual iteration of them sending us a document highlighting all the errors, and coming to an agreement on which rules to waive and which rules to pass back to the user to fix.  Because the two tapeouts were all-digital, we didn't have any user project errors that I recall.  The errors were things in the GF IP (like the I/O cells) which were being flagged by GF's own DRC deck;  none of which would meet the definition of an ""MR"" rule.","","üëç (1)"
"691780627338625077","rebelmike","2025-11-23T11:36:30.9110000+00:00","Yes, the default is to find roots automatically. In OpenLane 2 there didn‚Äôt seem to be a way to explicitly specify roots, I don‚Äôt know if things have improved since then.

If the gated clock only feeds a small number of cells, I believe you can avoid getting a full clock tree built for it by explicitly instantiating a buffer after the gate, which should reduce the skew.","",""
"732347216412278825","urish","2025-11-23T12:33:46.4510000+00:00","Started a thread.","",""
"323371864074485771","mole99","2025-11-23T13:15:41.3830000+00:00","That's right. From the first round of DRC with GF, it seems the whole rule deck is checked, including recommended rules.","",""
"596068704471482370","246tnt","2025-11-23T13:16:40.8680000+00:00","Do they allow to waive the recommended ?","",""
"323371864074485771","mole99","2025-11-23T13:17:43.7980000+00:00","Yes. But it's going to be a back and forth.","",""
"323371864074485771","mole99","2025-11-23T13:19:53.0550000+00:00","In other words, if we don't have any DRC violations, we don't need a waiver file, and submitting to the foundry would be faster and less complicated.","",""
"596068704471482370","246tnt","2025-11-23T13:29:42.6600000+00:00","Does the klayout deck test for recommended rules ?","",""
"323371864074485771","mole99","2025-11-23T13:34:42.3570000+00:00","The ones that were violated weren't checked at least. I would need to go through the whole deck to see which are implemented and which are not.
The other way is to go backwards: see which DRC rules are triggered and trying to fix them/add them to the deck.
With actual designs in the reticle we should see a more complete list of DRC violations that are not yet caught by the open source rule decks.","",""
"378788837452677120","asc9742","2025-11-23T23:35:15.9520000+00:00","Hi all, have people had success running LVS of their designs including the generated padframe? Would like some assurance it is possible before committing to running the long netgen LVS script.","",""
"220639106915368960","tholin","2025-11-23T23:37:45.9470000+00:00","I should do that sometime. I am super worried about VDD/VSS shorts and I believe LVS could detect them.","",""
"220639106915368960","tholin","2025-11-23T23:37:49.0940000+00:00","Though I‚Äôm not sure.","",""
"220639106915368960","tholin","2025-11-24T01:03:44.0960000+00:00","First DRC, LVS, STA clean GDSII","project-template_media/test_black-85010.png","üëè (6)"
"378788837452677120","asc9742","2025-11-24T01:09:34.3660000+00:00","What flow are you using for LVS? Did you create your own padframe schematic using the io spice files from GF or is there a way to get it from the project template?","",""
"220639106915368960","tholin","2025-11-24T01:10:17.1670000+00:00","The LVS that runs when you do `make librelane`","",""
"378788837452677120","asc9742","2025-11-24T01:11:17.9710000+00:00","I see.","",""
"738396032295108721","bailey8889","2025-11-24T01:12:16.9180000+00:00","@Tholin Be aware that the librelane LVS abstracts any macros and standard cells.
I can advise on a setup to run full device level LVS along with soft connection and ERC checks.","",""
"220639106915368960","tholin","2025-11-24T01:13:28.7470000+00:00","I‚Äôm mostly just interested in checking for VDD/VSS shorts","","üëç (1)"
"220639106915368960","tholin","2025-11-24T01:13:37.8060000+00:00","I accidentally created such shorts before and the flow did not fail.","",""
"803213471402688522","_luke_w_","2025-11-24T12:06:14.0170000+00:00","Is it possible to get librelane installed as an editable package (like a submodule of my repo) but still use the rest of the `nix-shell` setup? I wanted to look at adding a yosys extraction for mux + flop -> scan flop but librelane is quite hardcoded.","",""
"220639106915368960","tholin","2025-11-24T12:10:35.0130000+00:00","I have a similar complaint. nix-shell currently pulls binaries, but I‚Äôd actually like the option to have everything be built from source.","",""
"596068704471482370","246tnt","2025-11-24T12:22:33.0930000+00:00","@Tholin you can just remove the cachex entry I think. Then it will be everything from source.","",""
"323371864074485771","mole99","2025-11-24T12:36:35.8850000+00:00","You can clone the [leo/gf180mcu](https://github.com/librelane/librelane/tree/leo/gf180mcu) branch (same one used for wafer.space). Next, you can make any changes inside the repo and then start LibreLane with `nix-shell`. 
That's basically the same step as in: https://librelane.readthedocs.io/en/latest/installation/nix_installation/installation_linux.html#cloning-librelane
You can also apply patches in the in the Nix flake of the template, but it's a bit finicky.","",""
"323371864074485771","mole99","2025-11-24T12:37:35.2250000+00:00","That's what Nix is for. It builds all the binaries for you. In the case of the wafer.space template we point to a specific branch of LibreLane and the binaries are already cached.","",""
"803213471402688522","_luke_w_","2025-11-24T12:56:05.9910000+00:00","ah, so the shell I get from running `nix-shell` in that branch of the librelane repo is a suitable environment for running the makefile in the project template? If so then got it, thanks","",""
"803213471402688522","_luke_w_","2025-11-24T12:57:09.3610000+00:00","I probably would move to putting patches in the flake (should just be a few lines to add a flag to pass an extraction file) but I need to develop the patch üôÇ","","üëç (1)"
"323371864074485771","mole99","2025-11-24T13:05:14.8600000+00:00","Yes. The project template uses that branch with an override to get a newer magic version. But it should also work with the magic version specified in LibreLane.","",""
"384390069412429834","polyfractal","2025-11-24T16:14:24.1230000+00:00","very silly newbie question: does part of the librelane build process spit out the max frequency the chip is expected to run at? or is there some other way to tell?","",""
"323371864074485771","mole99","2025-11-24T16:26:22.1590000+00:00","Yes, you can find the report in the console or inside `54-openroad-stapostpnr/summary.rpt`. 
It contains a list of all corners and whether there are any setup violations for the target frequency. If there is a setup violation at a corner, it means that you will not be able to run the chip at the target frequency at that particular corner (PVT - Process, Voltage and Temperature). Using the setup worst slack, you can calculate the maximum frequency for each corner, which could even be above the target frequency.","",""
"538398807986274304","rzioma","2025-11-24T16:34:33.4750000+00:00","There is also `54-openroad-stapostpnr\nom_tt_025C_3v30\clock.rpt` (and actually for each corner) which tells you `fmax` for that corner.","",""
"384390069412429834","polyfractal","2025-11-24T17:15:06.5290000+00:00","thanks!","",""
"384390069412429834","polyfractal","2025-11-24T17:20:57.6060000+00:00","aha, and found the target frequency in the yaml. cheers!","","üôå (1)"
