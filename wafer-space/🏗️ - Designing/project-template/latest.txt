==============================================================
Guild: wafer.space Community
Channel: ğŸ—ï¸ - Designing / project-template
After: 12/01/2025 02:43
==============================================================

[12/01/2025 03:21] polyfractal
I've been working through the synth strategies and haven't seen any real correlation unfortunately. ğŸ™  `AREA 3` seems to be working best/fastest for my design so far


[12/01/2025 03:24] rebelmike
Yeah I was hoping it would fix it as I only needed a couple of ns, but it didnâ€™t seem to


[12/01/2025 03:24] _luke_w_
If you add this to your Makefile:

```
librelane-explore: ## Run synthesis exploration
    librelane librelane/config.yaml --pdk ${PDK} --pdk-root ${PDK_ROOT} --manual-pdk --last-run --flow SynthesisExploration
.PHONY: librelane-explore
```

And then run `make librelane-explore` it will try all 9 strategies and tell you which is best (though it's just synthesis timing)

{Reactions}
ğŸ˜® (2) ğŸ™ (2)

[12/01/2025 03:24] polyfractal
likewise ğŸ˜­  got it down to about 3ns but just can't seem to improve from there. might need to just drop the clock at this point


[12/01/2025 03:32] polyfractal
been pretty surprised by timing in general. For a while I assumed reducing density would help the optimizer spread out, insert buffers more easily, etc. but cranking up the density (in addition to more margins) helped a lot


[12/01/2025 03:33] _luke_w_
What's your density set to at the moment?


[12/01/2025 03:37] polyfractal
between 45 and 55 is yielding best results so far (still -3ns in some corners though)

{Reactions}
ğŸ‘

[12/01/2025 04:27] _luke_w_
There's a step disabled by default which I found helped a little:

```
RUN_POST_GRT_RESIZER_TIMING: True
```


[12/01/2025 04:29] _luke_w_
from: https://github.com/librelane/librelane/blob/774d6e6f221ccf21bd499e9b8ccba4afeffff4fd/librelane/flows/classic.py#L156-L161

{Embed}
https://github.com/librelane/librelane/blob/774d6e6f221ccf21bd499e9b8ccba4afeffff4fd/librelane/flows/classic.py
librelane/librelane/flows/classic.py at 774d6e6f221ccf21bd499e9b8cc...
ASIC implementation flow infrastructure, successor to OpenLane - librelane/librelane
project-template_media/librelane-02AD5


[12/01/2025 04:31] polyfractal
ooh, will try that on my next run!


[12/01/2025 04:34] polyfractal
if/when I do another shuttle, I think I'll just write a quick optimizer to churn through config options for like a week. beats doing it by hand ğŸ˜…


[12/01/2025 04:36] _luke_w_
yeah, I mean it should be possible to do this stuff methodically, but this flow does things in weird places


[12/01/2025 04:36] _luke_w_
like it doesn't do any gate sizing until after detailed placement


[12/01/2025 04:36] _luke_w_
but I am also just trying random shit to make my design meet timing at this point

{Reactions}
this

[12/01/2025 04:37] _luke_w_
I have had one run that I think I could make pass with some manual netlist changes but I don't really want to do that


[12/01/2025 04:38] polyfractal
i'm very nearly read to call it with my best -3ns case, and just slap a big heatsink on it ğŸ˜„ looked fine in the normal corners, just the hot ones were bad


[12/01/2025 04:39] polyfractal
how would you go about doing this btw? not sure I'd know what to tweak even if I wanted to


[12/01/2025 04:40] _luke_w_
You can run `librelane` with a `--last-run --from (some pass)` argument to make it restart a run from part way. Since I'm pressed for time I'd probably just edit the netlist with a text editor and re-run from there


[12/01/2025 04:41] _luke_w_
I just need some gate upsizing on some gates that are consistently on the critical path on my processor


[12/01/2025 04:41] _luke_w_
I think there is a "more proper" way of doing this in LibreLane, by adding an ECO pass


[12/01/2025 04:43] _luke_w_
At work our synth and pnr flows are just TCL and my understanding is they'll do pretty much the same thing: write a list of ECO scripts applied at a given point in the flow to apply a manual (but repeatable) fix. That's normally for slightly more esoteric stuff though, not just making the gates the right size on the critical path ğŸ˜…

{Reactions}
ğŸ˜

[12/01/2025 04:44] polyfractal
interesting, thanks! is there a way for librelane to tell you the critical path? Or is that just based on your knowledge of how the processor works?


[12/01/2025 04:44] _luke_w_
Yeah, just from reading the `max.rpt` from the final STA


[12/01/2025 04:45] polyfractal
oh gotcha, roger


[12/01/2025 04:45] _luke_w_
the reports are a bit inscrutable partly because this flow doesn't correctly attribute flops to their original names in the source code


[12/01/2025 04:45] _luke_w_
but you can usually make educated guesses


[12/01/2025 04:46] polyfractal
yeah it feels like reading tea leaves ğŸ™  I'm using a transpiled HDL which makes everything even more inscrutable too


==============================================================
Exported 27 message(s)
==============================================================
