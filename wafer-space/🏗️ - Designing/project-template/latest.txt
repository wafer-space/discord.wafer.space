==============================================================
Guild: wafer.space Community
Channel: ğŸ—ï¸ - Designing / project-template
After: 11/27/2025 17:50
==============================================================

[11/27/2025 17:56] mole99
Quick question: instead of a synchronizer, Hirosh could use an async apply and sync remove circuit for the reset. The ouput of this circuit gates the bidir OE and also goes into his circuit. So when you apply the reset, the bidir pads are immediately in a safe state. If you remove the reset, his circuit still works as before. Did I understand this correctly?


[11/27/2025 17:57] _luke_w_
Yep that seems like it would work

{Reactions}
ğŸ‘

[11/27/2025 17:58] _luke_w_
so you have an async reset, which is derived from the reset pad input with an async reset synchroniser

{Reactions}
ğŸ‘Œ

[11/27/2025 17:58] _luke_w_
that resets the pads and also goes into another synchroniser which generates the sync reset used for your digital logic


[11/27/2025 17:59] _luke_w_
something like that would work. I don't think he necessarily needs to make any changes but for a "production" chip it's certainly unusual to drive outputs at start of day


[11/27/2025 18:00] mole99
Why do you need another synchronizer afterwards? The reset signal is then already asynchronously removed.


[11/27/2025 18:01] _luke_w_
depends how your resets are constrained but if you allow async transitions to propagate to a sync reset net then that usually needs a timing exception


[11/27/2025 18:01] _luke_w_
even if it is async apply, sync remove


[11/27/2025 18:01] mole99
I see, thanks!


[11/27/2025 18:01] mole99
And another one: Without a PoR the outputs can still be in an unknown state during power up, right? Holding the reset low doesn't help in that case, as the input pads could be doing anything?


[11/27/2025 18:03] _luke_w_
I don't have a simple answer to that and don't fully understand it myself. There's a question there about how the pads behave during ramp-up, and how the logic cells behave at much less than nominal voltage


[11/27/2025 18:03] _luke_w_
If you have an async path from the reset that disables the pads then any spurious enable during power supply ramp will at least be a short-lived transient


[11/27/2025 18:04] mole99
"It's complicated" is what I thought as well ğŸ˜„


[11/27/2025 18:04] _luke_w_
my answer as a digital designer is values other than 1 and 0 don't exist and can't hurt me

{Reactions}
ğŸ˜„ â¤ï¸

[11/27/2025 18:06] mole99
Thanks for all the tips. It's great to have so many people with different experiences around. There's something for everyone to learn ğŸ‘


[11/27/2025 18:09] _luke_w_
yeah this project has been a huge learning curve for me. Thanks for all the help, hope I'm not too annoying with flagging issues


[11/27/2025 18:10] mole99
On the contrary, it is greatly appreciated!


[11/27/2025 18:10] logic_anarchy
@LukeW thank you


[11/27/2025 18:10] logic_anarchy


{Attachments}
project-template_media/image-1022A.png


[11/27/2025 18:11] logic_anarchy


{Attachments}
project-template_media/image-0447D.png


[11/27/2025 18:11] logic_anarchy
@mole99 thank you ğŸ™‚


[11/27/2025 18:11] mole99
Now only the synchronizer to the core is missing ğŸ‘


[11/27/2025 18:12] _luke_w_
Functionally looks good, might look funny in STA though. I would add a false path between the synchroniser output and the pad OE signals


[11/27/2025 18:13] logic_anarchy
is inside the soc

{Reactions}
ğŸ‘Œ

[11/27/2025 18:17] logic_anarchy
Could I use (* async_reg="true" *) reg [1:0] ff;


[11/27/2025 18:23] logic_anarchy
Maybe @LukeW Do you have an example to set false path. I think I need it for 2 signals ğŸ˜‰


[11/27/2025 18:24] logic_anarchy
https://github.com/Wren6991/RISCBoy-180/blob/bb4540d8b1ee8493448395a5b010c80b37377010/librelane/chip_top.sdc


[11/27/2025 18:27] _luke_w_
Most of them come from this wildcard:

```tcl
# Apply RTL-inserted false path constraints (setup/hold only, still constrain slew)
set_false_path -setup -hold -through [get_pins *.magic_falsepath_anchor_u/Z]
```

And then there is an RTL module that inserts magic buffers for the constraints:

https://github.com/Wren6991/RISCBoy-180/blob/bb4540d8b1ee8493448395a5b010c80b37377010/hdl/cells/falsepath_anchor.v


[11/27/2025 18:31] _luke_w_
You can also do it directly in the sdc, something like `set_false_path -setup -hold -from sync_reg_name_here/Q -to *_PAD/OE` but it's a bit cumbersome in this flow because flops don't have predictable names unless you instantiate them yourself

{Reactions}
ğŸ‰

[11/27/2025 18:51] logic_anarchy
Hi-z

{Attachments}
project-template_media/image-1B123.png


[11/27/2025 18:54] mole99 (pinned)
âš™ï¸ Update to the precheck, version [1.2.1](https://github.com/wafer-space/gf180mcu-precheck/releases/tag/1.2.1).

- Zero area polygons are checked.
- The layout origin and size are checked depending on the selected slot size, the default is `1x1`.
- Ensure that `PDK_ROOT` and `PDK` are set.


[11/27/2025 18:54] mole99
Pinned a message.


[11/27/2025 19:00] urish
will try in on ttgf0p2


[11/27/2025 19:01] urish
https://github.com/TinyTapeout/tinytapeout-gf-0p2/actions/runs/19745733739


==============================================================
Exported 34 message(s)
==============================================================
