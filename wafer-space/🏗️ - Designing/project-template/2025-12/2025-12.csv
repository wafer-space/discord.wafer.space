AuthorID,Author,Date,Content,Attachments,Reactions
"323371864074485771","mole99","2025-12-10T07:26:19.2340000+00:00","@tnt I see your point. However, I was considering the consequences of moving all dummy fill to active metal during the precheck. If we place the fill as dummy metal, but ignore DM.4_DM.6, DM.5_DM.7, we would need to remove these rules from the DRC deck.

This means, even designs where we don't need to use these exceptions (analog designs and the smaller slot sizes for digital designs) will have their dummy fill moved to active metal. I'm also not sure how happy GF will be about us circumventing these rules. Therefore, I thought it would be better to violate this rule on only one layer.

However, you're right. I'm seeing issues with the dummy fill on Metal3 that I didn't notice yesterday: it's getting placed on top of active Metal2.

I'll try to fix this and see if Metal3 can still meet density. If not we may need to resort to the all or nothing method.","",""
"323371864074485771","mole99","2025-12-10T07:26:58.5910000+00:00","@BreakingTaps This is the issue you're seeing. Sorry about that! I'll look into what went wrong.","",""
"596068704471482370","246tnt","2025-12-10T07:36:01.1240000+00:00","Ideally you'd have the option to ignore the distance to next/prev layers but still put them as dummy metal. And then another option in the DRC deck to ignore those rules, then as the last step of the hardening process, move them from `filler` to `drawing` and then run the full precheck on that.","","üëç (1)"
"691780627338625077","rebelmike","2025-12-10T07:37:20.3470000+00:00","I guess an ideal solution would be, per layer, to add dummy fill as normal first, and then if the min density isn‚Äôt met add as little active metal as possible to meet the density requirement. That would then tend not to be so much that the dummy fill on the layer above is too blocked.

Maybe that could be achieved by only converting some of the dummy to active during fill generation for each layer?","",""
"596068704471482370","246tnt","2025-12-10T07:39:19.6060000+00:00","Thing is if you add active on one layer, you now need to remove filler above/below it if you want to meet that rule ..","",""
"732347216412278825","urish","2025-12-10T07:43:24.2660000+00:00","Let's think like a smart LLM. 

Instead of solving the actual problem, we'll simply write a script that will delete the problematic rule  from the calibre deck. Then find a vulnerability in calibre that will allow code execution. Run this script. Problem solved!","","üíú (1)"
"596068704471482370","246tnt","2025-12-10T07:48:50.6940000+00:00","I was more thinking like ... add some solid `Metal2.drawing` between the bond pads.","",""
"596068704471482370","246tnt","2025-12-10T07:49:08.1450000+00:00","Tons of area far from everything that matters ...","",""
"323371864074485771","mole99","2025-12-10T08:01:39.7220000+00:00","Alright, I found the issue in the filler script. The top-level filler cells were only added to the layout once they had been generated for all layers. This means that subsequent layers did not consider previous ones (which was fine when it all was dummy metal).

By using `start_changes()` and `end_changes()` I can add the top-level filler cells before generating the actual fill. This allows each fill layer to consider the previous one. However, it does not allow to consider the subsequent layer, i.e. if you generate dummy metal on Metal2, you would need to consider this when placing active Metal3. Therefore, fill would need to be done in two passes: first generate the active metal fill for some layers, then generate the dummy metal fill for the other layers. But yeah, it would prevent fill on the layers above and below the active fill, so not a solution anyways...","",""
"323371864074485771","mole99","2025-12-10T08:02:47.9190000+00:00","The truly general solution is to ignore DM.4_DM.6 and DM.5_DM.7 when generating the dummy fill, and to move these shapes to active metal during the precheck.","",""
