AuthorID,Author,Date,Content,Attachments,Reactions
"709384666909507634","egorxe","2025-12-07T14:28:27.7180000+00:00","My design takes ~4 hours to verify locally, this is why I was pursuing even relatively small antenna runtime optimizations I had in my PR.","",""
"596068704471482370","246tnt","2025-12-07T14:32:31.0270000+00:00","4h for just for the antenna or the whole precheck ?","",""
"709384666909507634","egorxe","2025-12-07T14:41:30.6060000+00:00","Just antenna. My old Xeon workstation is rather slow in single thread, but it still should take a couple of hours on fast machine I think. KLayout DRC takes another ~3 hours locally.","",""
"1187141985530818611","ravenslofty","2025-12-07T14:53:54.9600000+00:00","`2025-12-07 06:25:53 +0000: Memory Usage (4133788K) : Executing rule ANT.16_ii_ANT.4 `
so, that's about 8h30m elapsed time on one antenna rule so far :p","","üòÖ (1)"
"323371864074485771","mole99","2025-12-07T14:57:52.9830000+00:00","Yes, but it still feels too long.
Extracting full connectivity in KLayout DRC for a complex design now takes ~15min. Of course, the actual antenna check goes on top. Still, I can't believe that querying the geometry and calculating the ratios has to take several hours (e.g. for the last antenna check).

Last time I checked with Matthias regarding the connectivity in the DRC deck, it paid off :)","",""
"596068704471482370","246tnt","2025-12-07T14:59:14.7840000+00:00","Did you check on magic how long it takes ?","",""
"596068704471482370","246tnt","2025-12-07T15:02:36.8370000+00:00","""88 KLayout density errors found.""","",""
"596068704471482370","246tnt","2025-12-07T15:02:40.3600000+00:00","üò¢","",""
"596068704471482370","246tnt","2025-12-07T15:02:50.8150000+00:00","(using new filler gen)","",""
"323371864074485771","mole99","2025-12-07T15:06:16.0520000+00:00","Hm, why so many violations? Shouldn't it create a single marker for each violated layer? (It's a global density check, not stepped.)","",""
"323371864074485771","mole99","2025-12-07T15:08:26.1240000+00:00","And can you show me the ratios for all layers? Should be in the logs.","",""
"596068704471482370","246tnt","2025-12-07T15:08:35.9270000+00:00","It's window density ...","",""
"596068704471482370","246tnt","2025-12-07T15:08:48.4160000+00:00","M2 layer only ... for basically every where in the chip üòÖ","",""
"596068704471482370","246tnt","2025-12-07T15:09:07.6480000+00:00","","general_media/2025-12-07_1579x846_scrot-1467A.png",""
"323371864074485771","mole99","2025-12-07T15:12:16.9690000+00:00","Oh right, it's in tiled mode. However, the ratio should still be calculated across the whole chip, it's only the markers that are tiled.","",""
"323371864074485771","mole99","2025-12-07T15:12:55.1350000+00:00","The problem is that there's Metal1 inside all standard cells. That means that almost no dummy Metal2 can be placed...","",""
"596068704471482370","246tnt","2025-12-07T15:13:05.6290000+00:00","Yeah, there is metal2 ... nowhere ...","",""
"732347216412278825","urish","2025-12-07T15:13:44.9370000+00:00","Why not?","",""
"596068704471482370","246tnt","2025-12-07T15:14:15.1100000+00:00","GF has this rulel that you can't place dummy if there is real metal in _adjacent_ layers ...","","üò´ (1)"
"323371864074485771","mole99","2025-12-07T15:15:00.7380000+00:00","Well, there should be some outside of the padring. Else it might be a bug?","general_media/image-62159.png",""
"596068704471482370","246tnt","2025-12-07T15:15:28.0210000+00:00","Yes, there is some outside the pad ring and between module but ... meeting 30% with that will be impossible ...","",""
"596068704471482370","246tnt","2025-12-07T15:15:42.3610000+00:00","Or maybe making it _solid_ metal2 dummy rather than little squares ..","",""
"323371864074485771","mole99","2025-12-07T15:15:59.6070000+00:00","That's the DRC rule. If there is active metal above or below, you can't place any dummy.
It's a stupid rule, that's why we initially decided to ignore it.","",""
"732347216412278825","urish","2025-12-07T15:16:06.8290000+00:00","Do we know why this rule exists? I can't make sense if it","",""
"596068704471482370","246tnt","2025-12-07T15:16:16.7130000+00:00","It's kind of annoying it doesn't report the actual density so we can now how far we are.","",""
"323371864074485771","mole99","2025-12-07T15:16:30.7490000+00:00","No, there's another rule for that...","",""
"596068704471482370","246tnt","2025-12-07T15:16:31.8530000+00:00","@urish Probably to avoid affecting capacitance of nearby nets.","","üëç (1)"
"323371864074485771","mole99","2025-12-07T15:16:46.8900000+00:00","It should be in the log.","",""
"596068704471482370","246tnt","2025-12-07T15:17:20.7410000+00:00","`29.238749553369797`","",""
"596068704471482370","246tnt","2025-12-07T15:17:31.9350000+00:00","üòë","",""
"732347216412278825","urish","2025-12-07T15:17:38.7330000+00:00","But wouldn't the same issue arise with non fill metal as well?","",""
"596068704471482370","246tnt","2025-12-07T15:18:23.8640000+00:00","@urish Of course, but the idea is that if you run simulation without fill, adding the fill shouldn't change/affect the results.","",""
"732347216412278825","urish","2025-12-07T15:18:58.6580000+00:00","Do you need some metal 2 smiley macros to throw around in the tt-mux?","",""
"596068704471482370","246tnt","2025-12-07T15:19:01.1150000+00:00","@urish Maybe copy the logo to `Metal2` layer üôÇ","",""
"732347216412278825","urish","2025-12-07T15:19:31.5560000+00:00","With pleasure will copy to layer","",""
"323371864074485771","mole99","2025-12-07T15:19:48.6160000+00:00","I can update the wafer.space logo as well.","",""
"596068704471482370","246tnt","2025-12-07T15:20:31.5930000+00:00","Running the fill in non-tiled mode might also help because there are gaps in the fill at the tile boundary","",""
"323371864074485771","mole99","2025-12-07T15:21:30.1980000+00:00","Yes, there is. But there's currently no solution for that afaik. You will always have filler cells at the tile boundary and KLayout doesn't cut them, but instead remove them.","",""
"596068704471482370","246tnt","2025-12-07T15:22:04.2340000+00:00","But you can run it non-tiled right ?","",""
"323371864074485771","mole99","2025-12-07T15:22:10.2030000+00:00","Yes.","",""
"596068704471482370","246tnt","2025-12-07T15:22:26.3830000+00:00","That will take longer of course but at this point I'll take anything that can help get some metal2.","",""
"323371864074485771","mole99","2025-12-07T15:23:01.4660000+00:00","Well, yeah. But it's not only you. There will be other designs that won't meet density with an even larger margin.","",""
"596068704471482370","246tnt","2025-12-07T15:23:13.5640000+00:00","It only the area inside the seal ring considered ?","",""
"323371864074485771","mole99","2025-12-07T15:23:41.4840000+00:00","No the whole chip as specified in the docs.","",""
"596068704471482370","246tnt","2025-12-07T15:25:03.9030000+00:00","I know, but running non-tiled will always lead to more fill, so it's pretty much always good. Sure, that'll only work if you're close but ...","",""
"596068704471482370","246tnt","2025-12-07T15:25:36.1040000+00:00","Could we make a fill / decap cell that has enough space between the met1 power rails to allow Metal2 filler ?","",""
"323371864074485771","mole99","2025-12-07T15:25:46.9530000+00:00","Yeah, of course. Every little bit helps :)","",""
"323371864074485771","mole99","2025-12-07T15:26:41.8660000+00:00","To be honest, that rule is really stupid and there's a solution to all of that: active dummy metal fill üòà","",""
"709384666909507634","egorxe","2025-12-07T15:27:35.7430000+00:00","Is there anything in DRM forbidding performing fill using regular non-fill metal layer if it's impossible to reach density with dummy layer?","",""
"596068704471482370","246tnt","2025-12-07T15:27:43.7050000+00:00","Sure, I mean, you'd have to do that during fab submission ... copy the `dummy` layer to `drawing` layer and be done with it.","",""
"596068704471482370","246tnt","2025-12-07T15:28:01.2670000+00:00","Because for all the dev process and such you want them separate.","","üëå (1)"
"323371864074485771","mole99","2025-12-07T15:28:11.4810000+00:00","No, not that I have seen.","",""
"323371864074485771","mole99","2025-12-07T15:30:15.0970000+00:00","I might add an option to the filler script to ignore the previous/subsequent active metal rules. So for analog designs it's still possible to do the fill according to the DRC rules.","",""
"323371864074485771","mole99","2025-12-07T15:32:19.0410000+00:00","Well, that sounds like a plan. Thanks for giving the script a try and for all the feedback!","",""
"596068704471482370","246tnt","2025-12-07T15:39:21.3490000+00:00","Too bad the standard cells don't have a marker layer, it'd have been nice to have a flag to just ignore met1 of stdcell ...","",""
"323371864074485771","mole99","2025-12-07T15:40:43.4390000+00:00","Yes, but we would still get DRC violations when submitting to the foundry. Except if we added those shapes as active metal...","",""
"596068704471482370","246tnt","2025-12-07T15:42:08.5900000+00:00","Oh yeah, of course, it was just to make it easier to deal with mixed analog/digital stuff.","","üëç (1)"
"596068704471482370","246tnt","2025-12-07T16:00:05.3540000+00:00","Ah, the klayout patch is no good ...","",""
"691780627338625077","rebelmike","2025-12-07T16:01:25.7990000+00:00","Can standard fill cells be easily identified at the point the fill is run? If so maybe could always add ‚Äúactive‚Äù metal above them (if there‚Äôs nothing else there)","",""
"323371864074485771","mole99","2025-12-07T16:09:15.6050000+00:00","Sylvain had the same idea just a few messages above üòÅ
Unfortunately, there's no easy way...","",""
"691780627338625077","rebelmike","2025-12-07T16:10:19.5780000+00:00","I was wondering if limiting it to just fill cells, rather than all standard cells, might make it easier","",""
"691780627338625077","rebelmike","2025-12-07T16:11:01.4590000+00:00","Eg is there any record of the cell name at that point, or could a marker be added just to those cells?","",""
"323371864074485771","mole99","2025-12-07T16:16:59.0900000+00:00","I see what you mean. It would be possible, but not really straightforward.
Since we need to add dummy metal as active metal anyways, at this point we can just convert all dummy I would say.","","üëç (1)"
