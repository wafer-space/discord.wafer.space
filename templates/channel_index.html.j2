<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#{{ channel.name }} Archive - {{ server.display_name }}</title>
    <link rel="stylesheet" href="/assets/style.css">
</head>
<body>
    <header>
        <nav class="breadcrumb">
            <a href="/index.html">Home</a> &gt;
            <a href="/{{ server.name }}/index.html">{{ server.display_name }}</a> &gt;
            <span>#{{ channel.name }}</span>
        </nav>
        <h1>#{{ channel.name }} Archive</h1>
    </header>

    <main>
        <section class="archives">
            <h2>Channel Messages</h2>
            {% for year, archives in archives_by_year.items() %}
            <h3>{{ year }}</h3>
            <ul class="archive-list">
                {% for archive in archives %}
                <li>
                    <strong>{{ archive.date }}</strong> ({{ archive.message_count }} messages)
                    <div class="formats">
                        <a href="/{{ server.name }}/{{ channel.name }}/{{ archive.date }}.html">HTML</a> |
                        <a href="/{{ server.name }}/{{ channel.name }}/{{ archive.date }}.txt">TXT</a> |
                        <a href="/{{ server.name }}/{{ channel.name }}/{{ archive.date }}.json">JSON</a> |
                        <a href="/{{ server.name }}/{{ channel.name }}/{{ archive.date }}.csv">CSV</a>
                    </div>
                </li>
                {% endfor %}
            </ul>
            {% endfor %}
        </section>

        {% if threads %}
        <section class="thread-list">
            <h2>Threads in this Channel</h2>
            {% for thread in threads %}
            <div class="thread-card {% if thread.archived %}archived{% endif %}">
                <h3>
                    <a href="/{{ server.name }}/{{ channel.name }}/{{ thread.url }}">
                        {{ thread.title }}
                    </a>
                </h3>
                <span class="meta">
                    {% if thread.archived %}<span class="archived-badge">Archived</span> • {% endif %}
                    {{ thread.reply_count }} replies
                    {% if thread.last_activity %} • Last: {{ thread.last_activity }}{% endif %}
                </span>
            </div>
            {% endfor %}
        </section>
        {% endif %}
    </main>

    <footer>
        <p><a href="/{{ server.name }}/index.html">← Back to {{ server.display_name }}</a></p>
    </footer>
</body>
</html>
